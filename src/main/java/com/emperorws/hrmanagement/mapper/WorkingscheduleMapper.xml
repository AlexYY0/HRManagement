<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.emperorws.hrmanagement.mapper.WorkingscheduleMapper">
  <resultMap id="BaseResultMap" type="com.emperorws.hrmanagement.model.Workingschedule">
    <id column="wsId" jdbcType="INTEGER" property="wsid" />
    <result column="workId" jdbcType="INTEGER" property="workid" />
    <result column="firstOfWeek" jdbcType="DATE" property="firstofweek" />
    <result column="sun" jdbcType="INTEGER" property="sun" />
    <result column="mon" jdbcType="INTEGER" property="mon" />
    <result column="tue" jdbcType="INTEGER" property="tue" />
    <result column="wed" jdbcType="INTEGER" property="wed" />
    <result column="thu" jdbcType="INTEGER" property="thu" />
    <result column="fri" jdbcType="INTEGER" property="fri" />
    <result column="sat" jdbcType="INTEGER" property="sat" />
  </resultMap>
  <resultMap id="AllWorkingscheduleInfo" type="com.emperorws.hrmanagement.model.Workingschedule" extends="BaseResultMap">
    <association property="employee" javaType="com.emperorws.hrmanagement.model.Employee">
      <id column="workid" property="workid"/>
      <result column="empname" property="empname"/>
    </association>
    <association property="department" javaType="com.emperorws.hrmanagement.model.Department">
      <id column="depid" property="depid"/>
      <result column="depname" property="depname"/>
    </association>
    <association property="businesshours7" javaType="com.emperorws.hrmanagement.model.Businesshours">
      <id column="busihoursid7" property="busihoursid"/>
      <result column="busihoursname7" property="busihoursname"/>
    </association>
    <association property="businesshours1" javaType="com.emperorws.hrmanagement.model.Businesshours">
      <id column="busihoursid1" property="busihoursid"/>
      <result column="busihoursname1" property="busihoursname"/>
    </association>
    <association property="businesshours2" javaType="com.emperorws.hrmanagement.model.Businesshours">
      <id column="busihoursid2" property="busihoursid"/>
      <result column="busihoursname2" property="busihoursname"/>
    </association>
    <association property="businesshours3" javaType="com.emperorws.hrmanagement.model.Businesshours">
      <id column="busihoursid3" property="busihoursid"/>
      <result column="busihoursname3" property="busihoursname"/>
    </association>
    <association property="businesshours4" javaType="com.emperorws.hrmanagement.model.Businesshours">
      <id column="busihoursid4" property="busihoursid"/>
      <result column="busihoursname4" property="busihoursname"/>
    </association>
    <association property="businesshours5" javaType="com.emperorws.hrmanagement.model.Businesshours">
      <id column="busihoursid5" property="busihoursid"/>
      <result column="busihoursname5" property="busihoursname"/>
    </association>
    <association property="businesshours6" javaType="com.emperorws.hrmanagement.model.Businesshours">
      <id column="busihoursid6" property="busihoursid"/>
      <result column="busihoursname6" property="busihoursname"/>
    </association>
  </resultMap>
  <sql id="Base_Column_List">
    wsId, workId, firstOfWeek, sun, mon, tue, wed, thu, fri, sat
  </sql>
  <select id="getWorkingscheduleByPage" resultMap="AllWorkingscheduleInfo">
    select w.*,emp.empName as empname,d.depName as depname,b7.busiHoursName as busihoursname7,b1.busiHoursName as busihoursname1,b2.busiHoursName as busihoursname2,b3.busiHoursName as busihoursname3,b4.busiHoursName as busihoursname4,b5.busiHoursName as busihoursname5,b6.busiHoursName as busihoursname6
    from employee emp,department d,workingSchedule w,businessHours b7,businessHours b1,businessHours b2,businessHours b3,businessHours b4,businessHours b5,businessHours b6
    where w.workId=emp.workId and emp.depId=d.depId and w.sun=b7.busiHoursId and w.mon=b1.busiHoursId and w.tue=b2.busiHoursId and w.wed=b3.busiHoursId and w.thu=b4.busiHoursId and w.fri=b5.busiHoursId and w.sat=b6.busiHoursId
    <if test="emp!=null">
      <if test="emp.empname !=null and emp.empname!=''">
        and emp.empName like concat('%',#{emp.empname},'%')
      </if>
      <if test="emp.depid !=null and emp.depid!=''">
        and emp.depId =#{emp.depid}
      </if>
    </if>
    <if test="firstofweek!=null">
      and w.firstOfWeek=#{firstofweek}
    </if>
    order by w.workId
    <if test="page !=null and size!=null">
      limit #{page},#{size}
    </if>
  </select>
  <select id="getTotal" resultType="java.lang.Long">
    select count(*) from workingSchedule w,employee emp,department d
    <where>
      emp.workId=w.workId AND emp.depId=d.depId
      <if test="emp!=null">
        <if test="emp.empname !=null and emp.empname!=''">
          and emp.empName like concat('%',#{emp.empname},'%')
        </if>
        <if test="emp.depid !=null">
          and emp.depId =#{emp.depid}
        </if>
      </if>
      <if test="firstofweek!=null">
        and w.firstOfWeek=#{firstofweek}
      </if>
    </where>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from workingschedule
    where wsId = #{wsid,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from workingschedule
    where wsId = #{wsid,jdbcType=INTEGER}
  </delete>
  <delete id="deleteWorkingschedules" parameterType="java.util.List">
    delete from workingschedule
    where workingschedule.wsId in
    <foreach collection="wss" item="ws" separator="," open="(" close=")">
      #{ws.wsid,jdbcType=INTEGER}
    </foreach>
  </delete>
  <insert id="autoSchedule" parameterType="com.emperorws.hrmanagement.model.Workingschedule">
    insert into workingschedule (workId, firstOfWeek,
      sun, mon, tue, wed, thu, fri, sat)
      values
      <foreach collection="emps" item="emp" separator="," close=";">
        (#{emp.workid,jdbcType=INTEGER}, #{firstofweek},
        1, 2, 2, 2, 2, 2, 1)
      </foreach>
  </insert>
  <insert id="insert" parameterType="com.emperorws.hrmanagement.model.Workingschedule">
    insert into workingschedule (wsId, workId, firstOfWeek, 
      sun, mon, tue, wed, 
      thu, fri, sat)
    values (#{wsid,jdbcType=INTEGER}, #{workid,jdbcType=INTEGER}, #{firstofweek,jdbcType=DATE}, 
      #{sun,jdbcType=INTEGER}, #{mon,jdbcType=INTEGER}, #{tue,jdbcType=INTEGER}, #{wed,jdbcType=INTEGER}, 
      #{thu,jdbcType=INTEGER}, #{fri,jdbcType=INTEGER}, #{sat,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.emperorws.hrmanagement.model.Workingschedule">
    insert into workingschedule
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="wsid != null">
        wsId,
      </if>
      <if test="workid != null">
        workId,
      </if>
      <if test="firstofweek != null">
        firstOfWeek,
      </if>
      <if test="sun != null">
        sun,
      </if>
      <if test="mon != null">
        mon,
      </if>
      <if test="tue != null">
        tue,
      </if>
      <if test="wed != null">
        wed,
      </if>
      <if test="thu != null">
        thu,
      </if>
      <if test="fri != null">
        fri,
      </if>
      <if test="sat != null">
        sat,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="wsid != null">
        #{wsid,jdbcType=INTEGER},
      </if>
      <if test="workid != null">
        #{workid,jdbcType=INTEGER},
      </if>
      <if test="firstofweek != null">
        #{firstofweek,jdbcType=DATE},
      </if>
      <if test="sun != null">
        #{sun,jdbcType=INTEGER},
      </if>
      <if test="mon != null">
        #{mon,jdbcType=INTEGER},
      </if>
      <if test="tue != null">
        #{tue,jdbcType=INTEGER},
      </if>
      <if test="wed != null">
        #{wed,jdbcType=INTEGER},
      </if>
      <if test="thu != null">
        #{thu,jdbcType=INTEGER},
      </if>
      <if test="fri != null">
        #{fri,jdbcType=INTEGER},
      </if>
      <if test="sat != null">
        #{sat,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateWorkingschedules" parameterType="java.util.List">
    update workingschedule
    where workingschedule.wsId in
    <foreach collection="wss" item="ws" separator="," open="(" close=")">
      #{ws.esid,jdbcType=INTEGER}
    </foreach>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.emperorws.hrmanagement.model.Workingschedule">
    update workingschedule
    <set>
      <if test="workid != null">
        workId = #{workid,jdbcType=INTEGER},
      </if>
      <if test="firstofweek != null">
        firstOfWeek = #{firstofweek,jdbcType=DATE},
      </if>
      <if test="sun != null">
        sun = #{sun,jdbcType=INTEGER},
      </if>
      <if test="mon != null">
        mon = #{mon,jdbcType=INTEGER},
      </if>
      <if test="tue != null">
        tue = #{tue,jdbcType=INTEGER},
      </if>
      <if test="wed != null">
        wed = #{wed,jdbcType=INTEGER},
      </if>
      <if test="thu != null">
        thu = #{thu,jdbcType=INTEGER},
      </if>
      <if test="fri != null">
        fri = #{fri,jdbcType=INTEGER},
      </if>
      <if test="sat != null">
        sat = #{sat,jdbcType=INTEGER},
      </if>
    </set>
    where wsId = #{wsid,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.emperorws.hrmanagement.model.Workingschedule">
    update workingschedule
    set workId = #{workid,jdbcType=INTEGER},
      firstOfWeek = #{firstofweek,jdbcType=DATE},
      sun = #{sun,jdbcType=INTEGER},
      mon = #{mon,jdbcType=INTEGER},
      tue = #{tue,jdbcType=INTEGER},
      wed = #{wed,jdbcType=INTEGER},
      thu = #{thu,jdbcType=INTEGER},
      fri = #{fri,jdbcType=INTEGER},
      sat = #{sat,jdbcType=INTEGER}
    where wsId = #{wsid,jdbcType=INTEGER}
  </update>
</mapper>
