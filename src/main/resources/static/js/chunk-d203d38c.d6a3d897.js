(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d203d38c"],{"0612":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("div",[a("div",{staticClass:"top-menu"},[a("div",[e._v(" 所属部门: "),a("el-popover",{attrs:{placement:"right",title:"请选择部门",width:"200",trigger:"manual"},model:{value:e.searchDepView,callback:function(t){e.searchDepView=t},expression:"searchDepView"}},[a("el-tree",{attrs:{"default-expand-all":"",data:e.allDeps,props:e.defaultProps},on:{"node-click":e.searvhViewHandleNodeClick}}),a("div",{staticClass:"select-dep",attrs:{slot:"reference"},on:{click:e.showSearchDepView},slot:"reference"},[e._v(e._s(e.inputDepName)+" ")])],1),e._v(" 统计日期: "),a("el-date-picker",{staticStyle:{width:"340px"},attrs:{type:"daterange","unlink-panels":"",align:"right","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","range-separator":"至","end-placeholder":"结束日期"},model:{value:e.searchValue.caldate,callback:function(t){e.$set(e.searchValue,"caldate",t)},expression:"searchValue.caldate"}}),a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入员工名进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.initAtteMon},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initAtteMon(t)}},model:{value:e.searchValue.empname,callback:function(t){e.$set(e.searchValue,"empname",t)},expression:"searchValue.empname"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.initAtteMon}},[e._v(" 搜索 ")])],1),a("div",[a("el-button",{attrs:{type:"statistics"},on:{click:e.statistics}},[a("i",{staticClass:"fas fa-calculator fa-lg",staticStyle:{"margin-right":"8px"}}),e._v("统计")]),a("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v(" 导出 ")])],1)])]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.atteMonLoading,expression:"atteMonLoading"}],ref:"multipleTable",attrs:{stripe:"",border:"","max-height":"513",data:e.atteMons,"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{"header-align":"center",fixed:"",prop:"attelogmonid",label:"编号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"employee.empname",fixed:"",align:"left",label:"姓名",width:"90"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"workid",label:"工号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.depname",width:"100",align:"left",label:"所属部门"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"totalh",width:"100",align:"left",label:"总工时"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"normalh",width:"100",align:"left",label:"正常工时"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"absenth",width:"100",align:"left",label:"缺勤工时"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"leaveh",width:"100",align:"left",label:"请假工时"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"vacateh",width:"100",align:"left",label:"调休工时"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"businessh",width:"100",align:"left",label:"出差工时"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"overtimeh",width:"100",align:"left",label:"加班工时"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"firstday",width:"145",align:"left",label:"被统计月第一天"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"endday",width:"145",align:"left",label:"被统计月最后一天"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"caldate",width:"145",align:"left",label:"统计时间"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",width:"100px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#15aabf"},attrs:{type:"text"},on:{click:function(a){return e.checkAtteMon(t.row)}}},[a("i",{staticClass:"fas fa-eye fa-lg"})]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editAtteMonView(t.row)}}},[a("i",{staticClass:"fas fa-edit  fa-lg"})]),a("el-button",{staticStyle:{color:"#e30007"},attrs:{type:"text"},on:{click:function(a){return e.deleteAtteMon(t.row)}}},[a("i",{staticClass:"fas fa-trash-alt fa-lg"})])]}}])})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.batchDelete}},[e._v("批量删除")]),a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("el-dialog",{attrs:{title:e.title,visible:e.atteMonDialog,width:"60%"},on:{"update:visible":function(t){e.atteMonDialog=t}}},[a("div",[a("el-form",{ref:"atteMonForm",attrs:{model:e.atteMon,"status-icon":"",rules:e.rules,disabled:e.NoModify,"label-position":"left","label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"员工工号:",prop:"workid"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入工号"},model:{value:e.atteMon.workid,callback:function(t){e.$set(e.atteMon,"workid",e._n(t))},expression:"atteMon.workid"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"总工时:",prop:"totalh"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入总工时"},model:{value:e.atteMon.totalh,callback:function(t){e.$set(e.atteMon,"totalh",e._n(t))},expression:"atteMon.totalh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"实际工时:",prop:"normalh"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入实际工时"},model:{value:e.atteMon.normalh,callback:function(t){e.$set(e.atteMon,"normalh",e._n(t))},expression:"atteMon.normalh"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"缺勤工时:",prop:"absenth"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入缺勤工时"},model:{value:e.atteMon.absenth,callback:function(t){e.$set(e.atteMon,"absenth",e._n(t))},expression:"atteMon.absenth"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"请假工时:",prop:"leaveh"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入请假工时"},model:{value:e.atteMon.leaveh,callback:function(t){e.$set(e.atteMon,"leaveh",e._n(t))},expression:"atteMon.leaveh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"调休工时:",prop:"vacateh"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入调休工时"},model:{value:e.atteMon.vacateh,callback:function(t){e.$set(e.atteMon,"vacateh",e._n(t))},expression:"atteMon.vacateh"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出差工时:",prop:"businessh"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入出差工时"},model:{value:e.atteMon.businessh,callback:function(t){e.$set(e.atteMon,"businessh",e._n(t))},expression:"atteMon.businessh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"加班工时:",prop:"overtimeh"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入加班工时"},model:{value:e.atteMon.overtimeh,callback:function(t){e.$set(e.atteMon,"overtimeh",e._n(t))},expression:"atteMon.overtimeh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"统计首日:",prop:"firstday"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择被统计月第一天"},model:{value:e.atteMon.firstday,callback:function(t){e.$set(e.atteMon,"firstday",t)},expression:"atteMon.firstday"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"统计末日:",prop:"endday"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择被统计月最后一天"},model:{value:e.atteMon.endday,callback:function(t){e.$set(e.atteMon,"endday",t)},expression:"atteMon.endday"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"统计时间:",prop:"caldate"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择统计时间","default-time":"09:00:00"},model:{value:e.atteMon.caldate,callback:function(t){e.$set(e.atteMon,"caldate",t)},expression:"atteMon.caldate"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.atteMonDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.doAddAtteMon}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"月末统计",visible:e.statisticsDialog,width:"50%"},on:{"update:visible":function(t){e.statisticsDialog=t}}},[a("div",[a("el-steps",{attrs:{active:e.activeItemIndex,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"选择日期范围",description:"选择统计的时间范围1~31"}}),a("el-step",{attrs:{title:"选择统计方式",description:"选择统计的方式(按部门或按工号)"}}),a("el-step",{attrs:{title:"选择被统计员工",description:"选择被统计员工"}})],1),a("div",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"center"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.activeItemIndex,expression:"activeItemIndex==0"}]},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"daterange","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"统计开始日期","end-placeholder":"统计结束日期"},model:{value:e.statisticsValue.monthday,callback:function(t){e.$set(e.statisticsValue,"monthday",t)},expression:"statisticsValue.monthday"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.activeItemIndex,expression:"activeItemIndex==1"}]},[a("el-radio-group",{model:{value:e.way,callback:function(t){e.way=t},expression:"way"}},[a("el-radio",{attrs:{label:"0"}},[e._v("所有员工")]),a("el-radio",{attrs:{label:"1"}},[e._v("按照部门")]),a("el-radio",{attrs:{label:"2"}},[e._v("按照员工")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.activeItemIndex,expression:"activeItemIndex==2"}]},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.way,expression:"way==1"}]},[e._v(" 所属部门: "),a("el-popover",{attrs:{placement:"right",title:"请选择部门",width:"200",trigger:"manual"},model:{value:e.statisticsDepView,callback:function(t){e.statisticsDepView=t},expression:"statisticsDepView"}},[a("el-tree",{attrs:{"default-expand-all":"",data:e.allDeps,props:e.defaultProps},on:{"node-click":e.statisticsViewHandleNodeClick}}),a("div",{staticClass:"select-dep",attrs:{slot:"reference"},on:{click:e.showStatisticsDepView},slot:"reference"},[e._v(e._s(e.inputStatisticsDepName)+" ")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.way,expression:"way==2"}]},[a("el-select",{staticClass:"findAllEmp-autocomplete",attrs:{"value-key":"workid",multiple:"",placeholder:"请选择","popper-append-to-body":!1},model:{value:e.selectedEmps,callback:function(t){e.selectedEmps=t},expression:"selectedEmps"}},e._l(e.employees,(function(t){return a("el-option",{key:t.workid,attrs:{label:t.label,value:t}},[a("div",{staticClass:"empname"},[e._v(e._s(t.label))]),a("span",{staticClass:"workid"},[e._v("工号: "+e._s(t.workid))])])})),1)],1)])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.preStep}},[e._v(e._s(2==e.activeItemIndex?"取消":"上一步"))]),a("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v(e._s(2==e.activeItemIndex?"完成":"下一步"))])],1)])],1)},i=[],n=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),{name:"AttManaOfMon",data:function(){return{searchValue:{empname:null,depid:null,caldate:null},statisticsValue:{monthday:null,depid:null},title:"",page:1,size:10,total:0,way:"0",atteMonDialog:!1,searchDepView:!1,statisticsDepView:!1,atteMonLoading:!1,statisticsDialog:!1,NoModify:!1,activeItemIndex:0,inputDepName:"所属部门",inputStatisticsDepName:"所属部门",atteMons:[],allDeps:[],employees:[],selectedEmps:[],multipleSelection:[],atteMon:{},defaultProps:{children:"children",label:"depname"},rules:{workid:[{required:!0,message:"请输入工号",trigger:"blur"}],totalh:[{required:!0,message:"请输入总工时",trigger:"blur"},{type:"number",message:"总工时必须为数字值",trigger:"blur"}],normalh:[{required:!0,message:"请输入实际工时",trigger:"blur"},{type:"number",message:"实际工时必须为数字值",trigger:"blur"}],absenth:[{required:!0,message:"请输入缺勤工时",trigger:"blur"},{type:"number",message:"缺勤工时必须为数字值",trigger:"blur"}],leaveh:[{required:!0,message:"请输入请假工时",trigger:"blur"},{type:"number",message:"请假工时必须为数字值",trigger:"blur"}],vacateh:[{required:!0,message:"请输入调休工时",trigger:"blur"},{type:"number",message:"调休工时必须为数字值",trigger:"blur"}],businessh:[{required:!0,message:"请输入出差工时",trigger:"blur"},{type:"number",message:"出差工时必须为数字值",trigger:"blur"}],overtimeh:[{required:!0,message:"请输入加班工时",trigger:"blur"},{type:"number",message:"加班工时必须为数字值",trigger:"blur"}],firstday:[{required:!0,message:"请选择被统计月第一天",trigger:"blur"}],endday:[{required:!0,message:"请选择被统计月最后一天",trigger:"blur"}],caldate:[{required:!0,message:"请选择统计时间",trigger:"blur"}]}}},mounted:function(){this.initData(),this.initAtteMon()},methods:{initAtteMon:function(){var e=this;this.atteMonLoading=!0;var t="/attendance/managementofmonth/?page="+this.page+"&size="+this.size;this.searchValue.empname&&(t+="&empname="+this.searchValue.empname),this.searchValue.depid&&(t+="&depid="+this.searchValue.depid),this.searchValue.caldate&&(t+="&caldate="+this.searchValue.caldate),this.getRequest(t).then((function(t){e.atteMonLoading=!1,t&&(e.atteMons=t.data,e.total=t.total,0==t.data.length&&e.$notify.error({title:"错误",message:"记录中没有统计数据，请翻页或添加数据！"}))}))},initData:function(){var e=this;window.sessionStorage.getItem("deps")?this.allDeps=JSON.parse(window.sessionStorage.getItem("deps")):this.getRequest("/employee/basic/info/deps").then((function(t){t&&(e.allDeps=t,window.sessionStorage.setItem("deps",JSON.stringify(t)))}))},checkAtteMon:function(e){this.title="查看员工考勤月度统计数据",this.atteMon=e,this.NoModify=!0,this.atteMonDialog=!0},editAtteMonView:function(e){this.title="编辑员工考勤月度统计数据",this.atteMon=Object.assign({},e),this.NoModify=!1,this.atteMonDialog=!0,this.$refs["atteMonForm"].resetFields()},deleteAtteMon:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.employee.empname+"】的考勤月度统计数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/attendance/managementofmonth/"+e.attelogmonid).then((function(e){e&&t.initAtteMon()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},batchDelete:function(){var e=this;this.$confirm("此操作将永久删除所选中的所有员工考勤月度统计数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.postRequest("/attendance/managementofmonth/deleteattemons/",e.multipleSelection).then((function(t){t&&e.initAtteMon()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},doAddAtteMon:function(){var e=this;1!=this.NoModify?this.$refs["atteMonForm"].validate((function(t){t&&e.putRequest("/attendance/managementofmonth/",e.atteMon).then((function(t){t&&(e.atteMonDialog=!1,e.initAtteMon())}))})):this.atteMonDialog=!1},preStep:function(){0!=this.activeItemIndex&&(2!=this.activeItemIndex?this.activeItemIndex--:this.statisticsDialog=!1)},nextStep:function(){var e=this;2==this.activeItemIndex&&(0==this.way?this.getRequest("/attendance/managementofmonth/calcall?monthday="+this.statisticsValue.monthday).then((function(t){t&&(e.initAtteMon(),e.statisticsDialog=!1)})):1==this.way?this.getRequest("/attendance/managementofmonth/calcbydepid?depid="+this.statisticsValue.depid+"&monthday="+this.statisticsValue.monthday).then((function(t){t&&(e.initAtteMon(),e.statisticsDialog=!1)})):this.postRequest("/attendance/managementofmonth/calcbyworkid?monthday="+this.statisticsValue.monthday,this.selectedEmps).then((function(t){t&&(e.initAtteMon(),e.statisticsDialog=!1)}))),this.activeItemIndex++},emptyStatistics:function(){this.statisticsValue.monthday="",this.way="0",this.selectedEmps=[],this.inputStatisticsDepName="所属部门"},statistics:function(){var e=this;this.emptyStatistics(),this.statisticsDialog=!0,this.activeItemIndex=0,window.sessionStorage.getItem("emps")?this.employees=JSON.parse(window.sessionStorage.getItem("emps")):this.getRequest("/organization/management/employee/").then((function(t){t&&(e.employees=t,window.sessionStorage.setItem("emps",JSON.stringify(t)))}))},sizeChange:function(e){this.size=e,this.initAtteMon()},currentChange:function(e){this.page=e,this.initAtteMon()},searvhViewHandleNodeClick:function(e){this.inputDepName=e.depname,this.searchValue.depid=e.depid,this.searchDepView=!this.searchDepView},statisticsViewHandleNodeClick:function(e){this.inputStatisticsDepName=e.depname,this.statisticsValue.depid=e.depid,this.statisticsDepView=!this.statisticsDepView},showSearchDepView:function(){this.searchDepView=!this.searchDepView},showStatisticsDepView:function(){this.statisticsDepView=!this.statisticsDepView},handleSelectionChange:function(e){this.multipleSelection=e},exportData:function(){var e=this;this.postRequestExcel("/attendance/managementofmonth/export/",this.multipleSelection).then((function(t){if(t){var a=t,l=new Blob([a],{type:"application/vnd.ms-excel"}),i=e.moment().format("YYYY.MM.DD_HH-mm-ss")+"员工考勤月度统计表.xls";if("download"in document.createElement("a")){var n=document.createElement("a");n.download=i,n.style.display="none",n.href=URL.createObjectURL(l),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(l,i)}}))}}}),s=n,r=(a("ceaf"),a("2877")),o=Object(r["a"])(s,l,i,!1,null,"70a713e3",null);t["default"]=o.exports},"11ee":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"待提交",name:"uncoapp"}},["uncoapp"===e.activeName?a("UncoApp"):e._e()],1),a("el-tab-pane",{attrs:{label:"流程中",name:"inhaapp"}},["inhaapp"===e.activeName?a("InhaApp"):e._e()],1),a("el-tab-pane",{attrs:{label:"已完成",name:"overapp"}},["overapp"===e.activeName?a("OverApp"):e._e()],1)],1)],1)},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.AddAppattView}},[e._v(" 添加新申请 ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.batchDeleteAppatt}},[e._v("批量删除申请")])],1)]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.appattLoading,expression:"appattLoading"}],ref:"multipleTable",attrs:{stripe:"",border:"","max-height":"513",data:e.appatts,"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{"header-align":"center",fixed:"",prop:"aatid",label:"编号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"employee.empname",fixed:"",align:"left",label:"姓名",width:"90"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"workid",label:"工号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.depname",width:"100",align:"left",label:"所属部门"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.leadername",width:"100",align:"left",label:"领导姓名"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"category",width:"100",align:"left",label:"申请类型"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",prop:"reason",width:"300",align:"left",label:"申请原因"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appbegindate",width:"140",align:"left",label:"开始时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appenddate",width:"140",align:"left",label:"结束时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"total",width:"100",align:"left",label:"时间总计"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appdate",width:"140",align:"left",label:"申请时间"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"申请状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(e.isSubmit(t.row.issubmit)))])]}}])}),a("el-table-column",{attrs:{align:"center",fixed:"right",width:"130px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#495057"},attrs:{type:"text"},on:{click:function(a){return e.submitAppatt(t.row)}}},[a("i",{staticClass:"fas fa-user-check fa-lg"})]),a("el-button",{staticStyle:{color:"#15aabf"},attrs:{type:"text"},on:{click:function(a){return e.checkAppatt(t.row)}}},[a("i",{staticClass:"fas fa-eye fa-lg"})]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editAppattView(t.row)}}},[a("i",{staticClass:"fas fa-edit  fa-lg"})]),a("el-button",{staticStyle:{color:"#e30007"},attrs:{type:"text"},on:{click:function(a){return e.deleteAppatt(t.row)}}},[a("i",{staticClass:"fas fa-trash-alt fa-lg"})])]}}])})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("el-dialog",{attrs:{title:e.title,visible:e.editAppattDialog,width:"40%"},on:{"update:visible":function(t){e.editAppattDialog=t}}},[a("div",[a("el-form",{ref:"appattForm",attrs:{model:e.appatt,"status-icon":"",rules:e.rules,disabled:e.NoModify}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工工号:",prop:"workid"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入工号"},model:{value:e.appatt.workid,callback:function(t){e.$set(e.appatt,"workid",t)},expression:"appatt.workid"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请类别:",prop:"category"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择申请类别",size:"mini"},model:{value:e.appatt.category,callback:function(t){e.$set(e.appatt,"category",t)},expression:"appatt.category"}},e._l(e.category,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"申请理由:",prop:"reason"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"textarea",autosize:{minRows:2,maxRows:7},placeholder:"请输入内容",minlength:"10",maxlength:"255","show-word-limit":""},model:{value:e.appatt.reason,callback:function(t){e.$set(e.appatt,"reason",t)},expression:"appatt.reason"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开始时间:",prop:"appbegindate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间","default-time":"09:00:00"},model:{value:e.appatt.appbegindate,callback:function(t){e.$set(e.appatt,"appbegindate",t)},expression:"appatt.appbegindate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"结束时间:",prop:"appenddate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择结束时间","default-time":"09:00:00"},model:{value:e.appatt.appenddate,callback:function(t){e.$set(e.appatt,"appenddate",t)},expression:"appatt.appenddate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间总计:",prop:"total"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入总计"},model:{value:e.appatt.total,callback:function(t){e.$set(e.appatt,"total",e._n(t))},expression:"appatt.total"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请时间:",prop:"appdate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择申请时间","default-time":"09:00:00"},model:{value:e.appatt.appdate,callback:function(t){e.$set(e.appatt,"appdate",t)},expression:"appatt.appdate"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editAppattDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddAppatt}},[e._v("确 定")])],1)])],1)},s=[],r={name:"UncoApp",data:function(){return{page:1,size:10,total:0,appatts:[],appattLoading:!1,editAppattDialog:!1,NoModify:!1,multipleSelection:[],title:"",category:["请假","调休","出差","加班"],appatt:{workid:1,category:"请假",reason:"生病",appbegindate:"2019-08-05 09:00:00",appenddate:"2019-08-05 18:00:00",total:8,appdate:"2019-08-05 07:00:00",issubmit:!1},rules:{workid:[{required:!0,message:"请输入工号",trigger:"blur"}],category:[{required:!0,message:"请选择申请类别",trigger:"change"}],reason:[{required:!0,message:"请输入申请原因",trigger:"blur"}],appbegindate:[{required:!0,message:"请选择申请开始时间",trigger:"blur"}],appenddate:[{required:!0,message:"请选择申请结束时间",trigger:"blur"}],total:[{required:!0,message:"请输入总计时间",trigger:"blur"},{type:"number",message:"总计时间必须为数字值",trigger:"blur"}],appdate:[{required:!0,message:"请选择申请时间",trigger:"blur"}]}}},mounted:function(){this.initAppatts()},methods:{initAppatts:function(){var e=this;this.appattLoading=!0,this.getRequest("/attendance/transactionapp/uncommittedappatt/?page="+this.page+"&size="+this.size).then((function(t){e.appattLoading=!1,t&&(e.appatts=t.data,e.total=t.total,0===t.data.length&&e.$notify.error({title:"错误",message:"待提交中没有数据，请翻页或添加数据！"}))}))},sizeChange:function(e){this.size=e,this.initAppatts()},currentChange:function(e){this.page=e,this.initAppatts()},emptyAppatt:function(){this.appatt={workid:JSON.parse(window.sessionStorage.getItem("user")).workid,category:"",reason:"",appbegindate:"",appenddate:"",total:0,appdate:"",issubmit:!1}},AddAppattView:function(){this.emptyAppatt(),this.title="添加新申请",this.NoModify=!1,this.editAppattDialog=!0,this.$refs["appattForm"].resetFields()},editAppattView:function(e){this.title="编辑申请",this.appatt=Object.assign({},e),this.NoModify=!1,this.editAppattDialog=!0},checkAppatt:function(e){this.title="查看申请",this.appatt=Object.assign({},e),this.NoModify=!0,this.editAppattDialog=!0},submitAppatt:function(e){var t=this;this.$confirm("此操作将提交编号为【"+e.aatid+"】的申请, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.issubmit=!0,t.putRequest("/attendance/transactionapp/",e).then((function(e){e&&t.initAppatts()}))})).catch((function(){t.$message({type:"info",message:"已取消提交"})}))},deleteAppatt:function(e){var t=this;this.$confirm("此操作将永久删除编号为【"+e.aatid+"】的申请, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/attendance/transactionapp/"+e.aatid).then((function(e){e&&t.initAppatts()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},batchDeleteAppatt:function(){var e=this;this.$confirm("此操作将永久删除所选中的所有申请草稿, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.postRequest("/attendance/transactionapp/deleteappatts/",e.multipleSelection).then((function(t){t&&e.initAppatts()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},confirmAddAppatt:function(){var e=this;this.appatt.aatid?this.$refs["appattForm"].validate((function(t){t&&e.putRequest("/attendance/transactionapp/",e.appatt).then((function(t){t&&(e.editAppattDialog=!1,e.initAppatts())}))})):this.$refs["appattForm"].validate((function(t){t&&e.postRequest("/attendance/transactionapp/",e.appatt).then((function(t){t&&(e.editAppattDialog=!1,e.initAppatts())}))}))},handleSelectionChange:function(e){this.multipleSelection=e},isSubmit:function(e){return!1===e?"未提交":"已提交"}},watch:{appatt:{handler:function(e,t){var a="/attendance/transactionapp/calcappatttime/?leavedaterange="+this.appatt.appbegindate+","+this.appatt.appenddate;this.getRequest(a).then((function(t){t&&(e.total=t)})),console.log(e,t)},deep:!0}}},o=r,c=a("2877"),p=Object(c["a"])(o,n,s,!1,null,"36ce83ce",null),d=p.exports,u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.appattLoading,expression:"appattLoading"}],ref:"multipleTable",attrs:{stripe:"",border:"","max-height":"513",data:e.appatts,"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{"header-align":"center",fixed:"",prop:"aatid",label:"编号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"employee.empname",fixed:"",align:"left",label:"姓名",width:"90"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"workid",label:"工号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.depname",width:"100",align:"left",label:"所属部门"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.leadername",width:"100",align:"left",label:"领导姓名"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"category",width:"100",align:"left",label:"申请类型"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",prop:"reason",width:"300",align:"left",label:"申请原因"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appbegindate",width:"140",align:"left",label:"开始时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appenddate",width:"140",align:"left",label:"结束时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"total",width:"100",align:"left",label:"时间总计"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appdate",width:"140",align:"left",label:"申请时间"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"申请状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(e.isSubmit(t.row.issubmit)))])]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"领导意见"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.isApprove(t.row.isapprove)))])]}}])}),a("el-table-column",{attrs:{align:"center",fixed:"right",width:"80px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#15aabf"},attrs:{type:"text"},on:{click:function(a){return e.checkAppatt(t.row)}}},[a("i",{staticClass:"fas fa-eye fa-lg"})]),a("el-button",{staticStyle:{color:"#e30007"},attrs:{type:"text"},on:{click:function(a){return e.deleteAppatt(t.row)}}},[a("i",{staticClass:"fas fa-trash-alt fa-lg"})])]}}])})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.batchDeleteAppatt}},[e._v("批量删除申请")]),a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("el-dialog",{attrs:{title:"查看申请",visible:e.editAppattDialog,width:"40%"},on:{"update:visible":function(t){e.editAppattDialog=t}}},[a("div",[a("el-form",{ref:"appattForm",attrs:{model:e.appatt,"status-icon":"",rules:e.rules,disabled:""}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工工号:",prop:"workid"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入工号"},model:{value:e.appatt.workid,callback:function(t){e.$set(e.appatt,"workid",t)},expression:"appatt.workid"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请类别:",prop:"category"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择申请类别",size:"mini"},model:{value:e.appatt.category,callback:function(t){e.$set(e.appatt,"category",t)},expression:"appatt.category"}},e._l(e.category,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"申请理由:",prop:"reason"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"textarea",autosize:{minRows:2,maxRows:7},placeholder:"请输入内容",minlength:"10",maxlength:"255","show-word-limit":""},model:{value:e.appatt.reason,callback:function(t){e.$set(e.appatt,"reason",t)},expression:"appatt.reason"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开始时间:",prop:"appbegindate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间","default-time":"09:00:00"},model:{value:e.appatt.appbegindate,callback:function(t){e.$set(e.appatt,"appbegindate",t)},expression:"appatt.appbegindate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"结束时间:",prop:"appenddate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择结束时间","default-time":"09:00:00"},model:{value:e.appatt.appenddate,callback:function(t){e.$set(e.appatt,"appenddate",t)},expression:"appatt.appenddate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间总计:",prop:"total"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入总计"},model:{value:e.appatt.total,callback:function(t){e.$set(e.appatt,"total",e._n(t))},expression:"appatt.total"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请时间:",prop:"appdate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择申请时间","default-time":"09:00:00"},model:{value:e.appatt.appdate,callback:function(t){e.$set(e.appatt,"appdate",t)},expression:"appatt.appdate"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editAppattDialog=!1}}},[e._v("确 定")])],1)])],1)},h=[],m={name:"InhaApp",data:function(){return{page:1,size:10,total:0,appatts:[],appattLoading:!1,editAppattDialog:!1,multipleSelection:[],category:["请假","调休","出差","加班"],appatt:{workid:1,category:"请假",reason:"生病",appbegindate:"2019-08-05 09:00:00",appenddate:"2019-08-05 18:00:00",total:8,appdate:"2019-08-05 07:00:00",issubmit:!1},rules:{workid:[{required:!0,message:"请输入工号",trigger:"blur"}],category:[{required:!0,message:"请选择申请类别",trigger:"change"}],reason:[{required:!0,message:"请输入申请原因",trigger:"blur"}],appbegindate:[{required:!0,message:"请选择申请开始时间",trigger:"blur"}],appenddate:[{required:!0,message:"请选择申请结束时间",trigger:"blur"}],total:[{required:!0,message:"请输入总计时间",trigger:"blur"},{type:"number",message:"总计时间必须为数字值",trigger:"blur"}],appdate:[{required:!0,message:"请选择申请时间",trigger:"blur"}]}}},mounted:function(){this.initAppatts()},methods:{initAppatts:function(){var e=this;this.appattLoading=!0,this.getRequest("/attendance/transactionapp/inhandappatt/?page="+this.page+"&size="+this.size).then((function(t){e.appattLoading=!1,t&&(e.appatts=t.data,e.total=t.total,0===t.data.length&&e.$notify.error({title:"错误",message:"流程中没有数据，请翻页或添加数据！"}))}))},sizeChange:function(e){this.size=e,this.initAppatts()},currentChange:function(e){this.page=e,this.initAppatts()},checkAppatt:function(e){this.appatt=Object.assign({},e),this.editAppattDialog=!0},deleteAppatt:function(e){var t=this;this.$confirm("此操作将永久删除编号为【"+e.aatid+"】的申请, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/attendance/transactionapp/"+e.aatid).then((function(e){e&&t.initAppatts()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},batchDeleteAppatt:function(){var e=this;this.$confirm("此操作将永久删除所选中的所有申请草稿, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.postRequest("/attendance/transactionapp/deleteappatts/",e.multipleSelection).then((function(t){t&&e.initAppatts()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.multipleSelection=e},isSubmit:function(e){return!1===e?"未提交":"已提交"},isApprove:function(e){return!0===e?"同意":!1===e?"拒绝":"未决定"}}},f=m,g=Object(c["a"])(f,u,h,!1,null,"c747b566",null),b=g.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.appattLoading,expression:"appattLoading"}],ref:"multipleTable",attrs:{stripe:"",border:"","max-height":"513",data:e.appatts,"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{"header-align":"center",fixed:"",prop:"aatid",label:"编号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"employee.empname",fixed:"",align:"left",label:"姓名",width:"90"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"workid",label:"工号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.depname",width:"100",align:"left",label:"所属部门"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.leadername",width:"100",align:"left",label:"领导姓名"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"category",width:"100",align:"left",label:"申请类型"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",prop:"reason",width:"300",align:"left",label:"申请原因"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appbegindate",width:"140",align:"left",label:"开始时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appenddate",width:"140",align:"left",label:"结束时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"total",width:"100",align:"left",label:"时间总计"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appdate",width:"140",align:"left",label:"申请时间"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"申请状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(e.isSubmit(t.row.issubmit)))])]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"领导意见"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.isApprove(t.row.isapprove)))])]}}])}),a("el-table-column",{attrs:{align:"center",fixed:"right",width:"80px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#15aabf"},attrs:{type:"text"},on:{click:function(a){return e.checkAppatt(t.row)}}},[a("i",{staticClass:"fas fa-eye fa-lg"})])]}}])})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("el-dialog",{attrs:{title:"查看申请",visible:e.editAppattDialog,width:"40%"},on:{"update:visible":function(t){e.editAppattDialog=t}}},[a("div",[a("el-form",{ref:"appattForm",attrs:{model:e.appatt,"status-icon":"",rules:e.rules,disabled:""}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工工号:",prop:"workid"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入工号"},model:{value:e.appatt.workid,callback:function(t){e.$set(e.appatt,"workid",t)},expression:"appatt.workid"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请类别:",prop:"category"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择申请类别",size:"mini"},model:{value:e.appatt.category,callback:function(t){e.$set(e.appatt,"category",t)},expression:"appatt.category"}},e._l(e.category,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"申请理由:",prop:"reason"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"textarea",autosize:{minRows:2,maxRows:7},placeholder:"请输入内容",minlength:"10",maxlength:"255","show-word-limit":""},model:{value:e.appatt.reason,callback:function(t){e.$set(e.appatt,"reason",t)},expression:"appatt.reason"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开始时间:",prop:"appbegindate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间","default-time":"09:00:00"},model:{value:e.appatt.appbegindate,callback:function(t){e.$set(e.appatt,"appbegindate",t)},expression:"appatt.appbegindate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"结束时间:",prop:"appenddate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择结束时间","default-time":"09:00:00"},model:{value:e.appatt.appenddate,callback:function(t){e.$set(e.appatt,"appenddate",t)},expression:"appatt.appenddate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间总计:",prop:"total"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入总计"},model:{value:e.appatt.total,callback:function(t){e.$set(e.appatt,"total",e._n(t))},expression:"appatt.total"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请时间:",prop:"appdate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择申请时间","default-time":"09:00:00"},model:{value:e.appatt.appdate,callback:function(t){e.$set(e.appatt,"appdate",t)},expression:"appatt.appdate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"领导意见:",prop:"isapprove"}},[a("el-switch",{attrs:{"active-text":"同意","active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":"拒绝"},model:{value:e.appatt.isapprove,callback:function(t){e.$set(e.appatt,"isapprove",t)},expression:"appatt.isapprove"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editAppattDialog=!1}}},[e._v("确 定")])],1)])],1)},w=[],v={name:"OverApp",data:function(){return{page:1,size:10,total:0,appatts:[],appattLoading:!1,editAppattDialog:!1,multipleSelection:[],category:["请假","调休","出差","加班"],appatt:{workid:1,category:"请假",reason:"生病",appbegindate:"2019-08-05 09:00:00",appenddate:"2019-08-05 18:00:00",total:8,appdate:"2019-08-05 07:00:00",issubmit:!1},rules:{workid:[{required:!0,message:"请输入工号",trigger:"blur"}],category:[{required:!0,message:"请选择申请类别",trigger:"change"}],reason:[{required:!0,message:"请输入申请原因",trigger:"blur"}],appbegindate:[{required:!0,message:"请选择申请开始时间",trigger:"blur"}],appenddate:[{required:!0,message:"请选择申请结束时间",trigger:"blur"}],isapprove:[{required:!0,message:"请选择领导意见",trigger:"blur"}],total:[{required:!0,message:"请输入总计时间",trigger:"blur"},{type:"number",message:"总计时间必须为数字值",trigger:"blur"}],appdate:[{required:!0,message:"请选择申请时间",trigger:"blur"}]}}},mounted:function(){this.initAppatts()},methods:{initAppatts:function(){var e=this;this.appattLoading=!0,this.getRequest("/attendance/transactionapp/overappatt/?page="+this.page+"&size="+this.size).then((function(t){e.appattLoading=!1,t&&(e.appatts=t.data,e.total=t.total,0===t.data.length&&e.$notify.error({title:"错误",message:"已完成中没有数据，请翻页或添加数据！"}))}))},sizeChange:function(e){this.size=e,this.initAppatts()},currentChange:function(e){this.page=e,this.initAppatts()},checkAppatt:function(e){this.appatt=Object.assign({},e),this.editAppattDialog=!0},handleSelectionChange:function(e){this.multipleSelection=e},isSubmit:function(e){return!1===e?"未提交":"已提交"},isApprove:function(e){return!0===e?"同意":!1===e?"拒绝":"未决定"}}},k=v,x=Object(c["a"])(k,y,w,!1,null,"608e65a4",null),D=x.exports,M={name:"AttTraapp",data:function(){return{activeName:"uncoapp"}},components:{UncoApp:d,InhaApp:b,OverApp:D}},S=M,Y=Object(c["a"])(S,l,i,!1,null,"1be29561",null);t["default"]=Y.exports},"29f8":function(e,t,a){},"3c55":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"88%"}},[a("div",[a("div",{staticClass:"top-menu"},[a("div",[e._v(" 所属部门: "),a("el-popover",{attrs:{placement:"right",title:"请选择部门",width:"200",trigger:"manual"},model:{value:e.searchDepView,callback:function(t){e.searchDepView=t},expression:"searchDepView"}},[a("el-tree",{attrs:{"default-expand-all":"",data:e.allDeps,props:e.defaultProps},on:{"node-click":e.searvhViewHandleNodeClick}}),a("div",{staticClass:"select-dep",attrs:{slot:"reference"},on:{click:e.showSearchDepView},slot:"reference"},[e._v(e._s(e.inputDepName)+" ")])],1),e._v(" 打卡日期: "),a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange","unlink-panels":"",align:"right","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.clockinday,callback:function(t){e.$set(e.searchValue,"clockinday",t)},expression:"searchValue.clockinday"}}),a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入员工名进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.initAtteDay},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initAtteDay(t)}},model:{value:e.searchValue.empname,callback:function(t){e.$set(e.searchValue,"empname",t)},expression:"searchValue.empname"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.initAtteDay}},[e._v(" 搜索 ")])],1),a("div",[a("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v(" 导出 ")])],1)])]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.atteDayLoading,expression:"atteDayLoading"}],ref:"multipleTable",attrs:{stripe:"",border:"","max-height":"513",data:e.atteDays,"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{"header-align":"center",fixed:"",prop:"attelogdayid",label:"编号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"employee.empname",fixed:"",align:"left",label:"姓名",width:"90"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"workid",label:"工号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.depname",width:"100",align:"left",label:"所属部门"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"clockinday",width:"100",align:"left",label:"打卡日期"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"signintime",width:"100",align:"left",label:"签到时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"signouttime",width:"100",align:"left",label:"签退时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"attestatus.attestaname",width:"115",align:"left",label:"考勤状态"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"needhours",width:"100",align:"left",label:"需要工作时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"workinghours",width:"100",align:"left",label:"实际工作时间"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",width:"100px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#15aabf"},attrs:{type:"text"},on:{click:function(a){return e.checkAtteDay(t.row)}}},[a("i",{staticClass:"fas fa-eye fa-lg"})]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editAtteDayView(t.row)}}},[a("i",{staticClass:"fas fa-edit  fa-lg"})]),a("el-button",{staticStyle:{color:"#e30007"},attrs:{type:"text"},on:{click:function(a){return e.deleteAtteDay(t.row)}}},[a("i",{staticClass:"fas fa-trash-alt fa-lg"})])]}}])})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.batchDelete}},[e._v("批量删除")]),a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("el-dialog",{attrs:{title:e.title,visible:e.atteDayDialog,width:"50%"},on:{"update:visible":function(t){e.atteDayDialog=t}}},[a("div",[a("el-form",{ref:"atteDayForm",attrs:{model:e.atteDay,"status-icon":"",rules:e.rules,disabled:e.NoModify,"label-position":"left","label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工工号:",prop:"workid"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入工号"},model:{value:e.atteDay.workid,callback:function(t){e.$set(e.atteDay,"workid",e._n(t))},expression:"atteDay.workid"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"打卡日期:",prop:"clockinday"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择打卡日期"},model:{value:e.atteDay.clockinday,callback:function(t){e.$set(e.atteDay,"clockinday",t)},expression:"atteDay.clockinday"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签到时间: ",prop:"signintime"}},[a("el-time-picker",{staticStyle:{width:"90%"},attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"请选择签到时间"},model:{value:e.atteDay.signintime,callback:function(t){e.$set(e.atteDay,"signintime",t)},expression:"atteDay.signintime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签退时间: ",prop:"signouttime"}},[a("el-time-picker",{staticStyle:{width:"90%"},attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"请选择签退时间"},model:{value:e.atteDay.signouttime,callback:function(t){e.$set(e.atteDay,"signouttime",t)},expression:"atteDay.signouttime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"考勤状态:",prop:"clockinflag"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{clearable:"",placeholder:"请选择考勤状态",size:"mini"},model:{value:e.atteDay.clockinflag,callback:function(t){e.$set(e.atteDay,"clockinflag",t)},expression:"atteDay.clockinflag"}},e._l(e.attestatus,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"需要工时:",prop:"needhours"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入需要工时"},model:{value:e.atteDay.needhours,callback:function(t){e.$set(e.atteDay,"needhours",e._n(t))},expression:"atteDay.needhours"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实际工时:",prop:"workinghours"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入实际工时"},model:{value:e.atteDay.workinghours,callback:function(t){e.$set(e.atteDay,"workinghours",e._n(t))},expression:"atteDay.workinghours"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.atteDayDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.doAddAtteDay}},[e._v("确 定")])],1)])],1)},i=[],n={name:"AttManagOfDay",data:function(){return{searchValue:{empname:null,depid:null,clockinday:null},searchDepView:!1,atteDayLoading:!1,NoModify:!1,atteDayDialog:!1,page:1,size:10,total:0,title:"",inputDepName:"所属部门",allDeps:[],multipleSelection:[],atteDays:[],atteDay:{},attestatus:[{value:0,label:"未签到/未签退"},{value:1,label:"未签到/早退"},{value:2,label:"未签到/正常签退"},{value:10,label:"迟到/未签退"},{value:11,label:"迟到/早退"},{value:12,label:"迟到/正常签退"},{value:20,label:"正常签到/未签退"},{value:21,label:"正常签到/早退"},{value:22,label:"正常签到/正常签退"}],defaultProps:{children:"children",label:"depname"},rules:{workid:[{required:!0,message:"请输入工号",trigger:"blur"}],clockinday:[{required:!0,message:"请输入打卡日期",trigger:"blur"}],signintime:[{required:!0,message:"请输入签到时间",trigger:"blur"}],signouttime:[{required:!0,message:"请输入签退时间",trigger:"blur"}],clockinflag:[{required:!0,message:"请选择考勤状态",trigger:"change"}],needhours:[{required:!0,message:"请输入需要工时",trigger:"blur"},{type:"number",message:"需要工时必须为数字值",trigger:"blur"}],workinghours:[{required:!0,message:"请输入实际工时",trigger:"blur"},{type:"number",message:"实际工时必须为数字值",trigger:"blur"}]}}},mounted:function(){this.initData(),this.initAtteDay()},methods:{initData:function(){var e=this;window.sessionStorage.getItem("deps")?this.allDeps=JSON.parse(window.sessionStorage.getItem("deps")):this.getRequest("/employee/basic/info/deps").then((function(t){t&&(e.allDeps=t,window.sessionStorage.setItem("deps",JSON.stringify(t)))}))},initAtteDay:function(){var e=this;this.atteDayLoading=!0;var t="/attendance/managementofday/?page="+this.page+"&size="+this.size;this.searchValue.empname&&(t+="&empname="+this.searchValue.empname),this.searchValue.depid&&(t+="&depid="+this.searchValue.depid),this.searchValue.clockinday&&(t+="&clockinday="+this.searchValue.clockinday),this.getRequest(t).then((function(t){e.atteDayLoading=!1,t&&(e.atteDays=t.data,e.total=t.total,0==t.data.length&&e.$notify.error({title:"错误",message:"记录中没有统计数据，请翻页或添加数据！"}))}))},checkAtteDay:function(e){this.title="查看员工考勤信息",this.atteDay=e,this.NoModify=!0,this.atteDayDialog=!0},editAtteDayView:function(e){this.title="编辑员工考勤信息",this.atteDay=Object.assign({},e),this.NoModify=!1,this.atteDayDialog=!0,this.$refs["atteDayForm"].resetFields()},deleteAtteDay:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.employee.empname+"】的考勤信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/attendance/managementofday/"+e.attelogdayid).then((function(e){e&&t.initAtteDay()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},batchDelete:function(){var e=this;this.$confirm("此操作将永久删除所选中的所有员工每日考勤数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.postRequest("/attendance/managementofday/deleteattedays/",e.multipleSelection).then((function(t){t&&e.initAtteDay()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},doAddAtteDay:function(){var e=this;1!=this.NoModify?this.$refs["atteDayForm"].validate((function(t){t&&e.putRequest("/attendance/managementofday/",e.atteDay).then((function(t){t&&(e.atteDayDialog=!1,e.initAtteDay())}))})):this.atteDayDialog=!1},searvhViewHandleNodeClick:function(e){this.inputDepName=e.depname,this.searchValue.depid=e.depid,this.searchDepView=!this.searchDepView},showSearchDepView:function(){this.searchDepView=!this.searchDepView},sizeChange:function(e){this.size=e,this.initAtteDay()},currentChange:function(e){this.page=e,this.initAtteDay()},handleSelectionChange:function(e){this.multipleSelection=e}}},s=n,r=(a("8583"),a("2877")),o=Object(r["a"])(s,l,i,!1,null,"d7582f76",null);t["default"]=o.exports},"48ee":function(e,t,a){"use strict";var l=a("29f8"),i=a.n(l);i.a},"587e":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"班次管理",name:"busihour"}},["busihour"===e.activeName?a("BusiHour"):e._e()],1),a("el-tab-pane",{attrs:{label:"排班管理",name:"empsche"}},["empsche"===e.activeName?a("EmpSche"):e._e()],1)],1)],1)},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"65%"}},[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.AddBhView}},[e._v(" 添加班次 ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.batchDeleteBh}},[e._v("批量删除班次")])],1)]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.businesshoursLoading,expression:"businesshoursLoading"}],ref:"multipleTable",attrs:{stripe:"",border:"","max-height":"513",data:e.businesshourss,"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{"header-align":"center",fixed:"",prop:"busihoursid",label:"编号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"busihoursname",label:"班次名称",align:"left",width:"110"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"begintime",label:"上班时间",align:"left",width:"110"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"endtime",label:"下班时间",align:"left",width:"110"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"beginrest",label:"开始休息",align:"left",width:"110"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"endrest",label:"结束休息",align:"left",width:"110"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini"},on:{click:function(a){return e.editBhView(t.row)}}},[e._v("编辑")]),a("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteBh(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:e.title,visible:e.editBhDialog,width:"30%"},on:{"update:visible":function(t){e.editBhDialog=t}}},[a("el-form",{ref:"businesshoursForm",attrs:{model:e.businesshours,"status-icon":"",rules:e.rules}},[a("el-form-item",{attrs:{label:"班次名称: ",prop:"busihoursname"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{clearable:"","prefix-icon":"el-icon-edit",placeholder:"请输入班次名称"},model:{value:e.businesshours.busihoursname,callback:function(t){e.$set(e.businesshours,"busihoursname",e._n(t))},expression:"businesshours.busihoursname"}})],1),a("el-form-item",{attrs:{label:"上班时间: ",prop:"begintime"}},[a("el-time-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"请选择上班时间"},model:{value:e.businesshours.begintime,callback:function(t){e.$set(e.businesshours,"begintime",t)},expression:"businesshours.begintime"}})],1),a("el-form-item",{attrs:{label:"下班时间: ",prop:"endtime"}},[a("el-time-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"请选择下班时间"},model:{value:e.businesshours.endtime,callback:function(t){e.$set(e.businesshours,"endtime",t)},expression:"businesshours.endtime"}})],1),a("el-form-item",{attrs:{label:"开始休息: ",prop:"beginrest"}},[a("el-time-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"请选择开始休息"},model:{value:e.businesshours.beginrest,callback:function(t){e.$set(e.businesshours,"beginrest",t)},expression:"businesshours.beginrest"}})],1),a("el-form-item",{attrs:{label:"结束休息: ",prop:"endrest"}},[a("el-time-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"请选择结束休息"},model:{value:e.businesshours.endrest,callback:function(t){e.$set(e.businesshours,"endrest",t)},expression:"businesshours.endrest"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editBhDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddBh}},[e._v("确 定")])],1)],1)],1)},s=[],r={name:"BusiHour",data:function(){return{businesshourss:[],businesshoursLoading:!1,editBhDialog:!1,multipleSelection:[],title:"",businesshours:{busihoursname:"早班",begintime:"18:00",endtime:"08:00",beginrest:"12:00",endrest:"13:00"},rules:{busihoursname:[{required:!0,message:"请输入班次名称",trigger:"blur"}],begintime:[{required:!0,message:"请输入上班时间",trigger:"blur"}],endtime:[{required:!0,message:"请输入下班时间",trigger:"blur"}],beginrest:[{required:!0,message:"请输入开始休息时间",trigger:"blur"}],endrest:[{required:!0,message:"请输入结束休息时间",trigger:"blur"}]}}},mounted:function(){this.initBhs()},methods:{initBhs:function(){var e=this;this.businesshoursLoading=!0,this.getRequest("/attendance/workingschedule/busihour/").then((function(t){e.businesshoursLoading=!1,t&&(e.businesshourss=t,0===t.data.length&&e.$notify.error({title:"错误",message:"本页班次没有数据，请翻页或添加数据！"}))}))},emptyBh:function(){this.businesshours={busihoursname:"",begintime:"",endtime:"",beginrest:"",endrest:""}},batchDeleteBh:function(){var e=this;this.$confirm("此操作将永久删除所选中的所有班次, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.postRequest("/attendance/workingschedule/busihour/deletebhs/",e.multipleSelection).then((function(t){t&&e.initBhs()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},AddBhView:function(){this.emptyBh(),this.title="添加班次",this.editBhDialog=!0,this.$refs["businesshoursForm"].resetFields()},editBhView:function(e){this.title="编辑班次",this.businesshours=Object.assign({},e),this.editBhDialog=!0},deleteBh:function(e){var t=this;this.$confirm("此操作将永久删除名称为【"+e.busihoursname+"】的班次, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/attendance/workingschedule/busihour/"+e.busihoursid).then((function(e){e&&t.initBhs()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},confirmAddBh:function(){var e=this;this.businesshours.busihoursid?this.$refs["businesshoursForm"].validate((function(t){t&&e.putRequest("/attendance/workingschedule/busihour/",e.businesshours).then((function(t){t&&(e.editBhDialog=!1,e.initBhs())}))})):this.$refs["businesshoursForm"].validate((function(t){t&&e.postRequest("/attendance/workingschedule/busihour/",e.businesshours).then((function(t){t&&(e.editBhDialog=!1,e.initBhs())}))}))},handleSelectionChange:function(e){this.multipleSelection=e}}},o=r,c=a("2877"),p=Object(c["a"])(o,n,s,!1,null,"fcaa0198",null),d=p.exports,u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"top-menu"},[a("div",[e._v(" 所属部门: "),a("el-popover",{attrs:{placement:"right",title:"请选择部门",width:"200",trigger:"manual"},model:{value:e.searchDepView,callback:function(t){e.searchDepView=t},expression:"searchDepView"}},[a("el-tree",{attrs:{"default-expand-all":"",data:e.allDeps,props:e.defaultProps},on:{"node-click":e.searvhViewHandleNodeClick}}),a("div",{staticClass:"select-dep",attrs:{slot:"reference"},on:{click:e.showSearchDepView},slot:"reference"},[e._v(e._s(e.inputDepName)+" ")])],1),e._v(" 排班日期: "),a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择日期"},on:{change:e.changeAllTime},model:{value:e.firstOfMonth,callback:function(t){e.firstOfMonth=t},expression:"firstOfMonth"}}),a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入员工名进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.initWS},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initWS(t)}},model:{value:e.searchValue.empname,callback:function(t){e.$set(e.searchValue,"empname",t)},expression:"searchValue.empname"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.initWS}},[e._v(" 搜索 ")])],1),a("div",[a("el-button",{attrs:{type:"success"},on:{click:e.autoDo}},[a("i",{staticClass:"fas fa-robot fa-lg",staticStyle:{"margin-right":"8px"}}),e._v("本月自动排班")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.batchDeleteSche}},[e._v("批量删除排班")])],1)]),a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"datatitle"},[a("el-button",{staticStyle:{color:"black"},attrs:{type:"text"},on:{click:e.lastweek}},[a("i",{staticClass:"fas fa-arrow-left fa-lg"})]),a("div",[a("span",[e._v(e._s(e.firstOfMonth))]),a("span",[e._v(" - "+e._s(e.endOfMonth))])]),a("el-button",{staticStyle:{color:"black"},attrs:{type:"text"},on:{click:e.nextweek}},[a("i",{staticClass:"fas fa-arrow-right fa-lg"})])],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.wsInfoLoading,expression:"wsInfoLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",border:"","max-height":"513",data:e.wss,"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"empname",fixed:"",align:"left",label:"姓名",width:"110"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"workid",label:"工号",align:"left",width:"110"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"depname",width:"110",align:"left",label:"所属部门"}}),a("el-table-column",{attrs:{label:e.firstOfMonth,"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(e.firstOfMonth)},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d1,callback:function(a){e.$set(t.row,"d1",a)},expression:"scope.row.d1"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(1,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(1,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d2,callback:function(a){e.$set(t.row,"d2",a)},expression:"scope.row.d2"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(2,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(2,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d3,callback:function(a){e.$set(t.row,"d3",a)},expression:"scope.row.d3"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(3,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(3,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d4,callback:function(a){e.$set(t.row,"d4",a)},expression:"scope.row.d4"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(4,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(4,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d5,callback:function(a){e.$set(t.row,"d5",a)},expression:"scope.row.d5"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(5,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(5,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d6,callback:function(a){e.$set(t.row,"d6",a)},expression:"scope.row.d6"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(6,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(6,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d7,callback:function(a){e.$set(t.row,"d7",a)},expression:"scope.row.d7"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(7,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(7,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d8,callback:function(a){e.$set(t.row,"d8",a)},expression:"scope.row.d8"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(8,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(8,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d9,callback:function(a){e.$set(t.row,"d9",a)},expression:"scope.row.d9"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(9,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(9,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d10,callback:function(a){e.$set(t.row,"d10",a)},expression:"scope.row.d10"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(10,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(10,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d11,callback:function(a){e.$set(t.row,"d11",a)},expression:"scope.row.d11"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(11,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(11,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d12,callback:function(a){e.$set(t.row,"d12",a)},expression:"scope.row.d12"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(12,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(12,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d13,callback:function(a){e.$set(t.row,"d13",a)},expression:"scope.row.d13"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(13,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(13,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d14,callback:function(a){e.$set(t.row,"d14",a)},expression:"scope.row.d14"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(14,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(14,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d15,callback:function(a){e.$set(t.row,"d15",a)},expression:"scope.row.d15"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(15,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(15,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d16,callback:function(a){e.$set(t.row,"d16",a)},expression:"scope.row.d16"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(16,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(16,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d17,callback:function(a){e.$set(t.row,"d17",a)},expression:"scope.row.d17"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(17,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(17,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d18,callback:function(a){e.$set(t.row,"d18",a)},expression:"scope.row.d18"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(18,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(18,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d19,callback:function(a){e.$set(t.row,"d19",a)},expression:"scope.row.d19"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(19,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(19,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d20,callback:function(a){e.$set(t.row,"d20",a)},expression:"scope.row.d20"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(20,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(20,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d21,callback:function(a){e.$set(t.row,"d21",a)},expression:"scope.row.d21"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(21,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(21,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d22,callback:function(a){e.$set(t.row,"d22",a)},expression:"scope.row.d22"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(22,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(22,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d23,callback:function(a){e.$set(t.row,"d23",a)},expression:"scope.row.d23"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(23,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(23,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d24,callback:function(a){e.$set(t.row,"d24",a)},expression:"scope.row.d24"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(24,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(24,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d25,callback:function(a){e.$set(t.row,"d25",a)},expression:"scope.row.d25"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(25,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(25,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d26,callback:function(a){e.$set(t.row,"d26",a)},expression:"scope.row.d26"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(26,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(26,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d27,callback:function(a){e.$set(t.row,"d27",a)},expression:"scope.row.d27"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(27,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(27,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d28,callback:function(a){e.$set(t.row,"d28",a)},expression:"scope.row.d28"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(28,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(28,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d29,callback:function(a){e.$set(t.row,"d29",a)},expression:"scope.row.d29"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(29,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(29,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d30,callback:function(a){e.$set(t.row,"d30",a)},expression:"scope.row.d30"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{label:this.moment(this.firstOfMonth).add(30,"d").format("YYYY-MM-DD"),"header-align":"center"}},[a("el-table-column",{attrs:{"header-align":"center",width:"110",align:"left",label:e.week(this.moment(this.firstOfMonth).add(30,"d").format("YYYY-MM-DD"))},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择排班"},model:{value:t.row.d31,callback:function(a){e.$set(t.row,"d31",a)},expression:"scope.row.d31"}},e._l(e.businesshours,(function(e){return a("el-option",{key:e.busihoursid,attrs:{label:e.busihoursname,value:e.busihoursid}})})),1)]}}])})],1),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#495057"},attrs:{type:"text"},on:{click:function(a){return e.submitSchedule(t.row)}}},[a("i",{staticClass:"fas fa-user-check fa-lg"})])]}}])})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)])])},h=[],m={name:"EmpSche",data:function(){return{searchValue:{empname:null,depid:null},firstOfMonth:"",endOfMonth:"",page:1,size:10,total:0,searchDepView:!1,wsInfoLoading:!1,wss:[],allDeps:[],businesshours:[],multipleSelection:[],inputDepName:"所属部门",defaultProps:{children:"children",label:"depname"}}},mounted:function(){this.initData(),this.initWS()},methods:{initData:function(){var e=this;this.firstOfMonth=this.moment().startOf("month").format("YYYY-MM-DD"),this.endOfMonth=this.moment().endOf("month").format("YYYY-MM-DD"),window.sessionStorage.getItem("deps")?this.allDeps=JSON.parse(window.sessionStorage.getItem("deps")):this.getRequest("/employee/basic/info/deps").then((function(t){t&&(e.allDeps=t,window.sessionStorage.setItem("deps",JSON.stringify(t)))})),window.sessionStorage.getItem("businesshours")?this.businesshours=JSON.parse(window.sessionStorage.getItem("businesshours")):this.getRequest("/attendance/workingschedule/busihour/").then((function(t){t&&(e.businesshours=t,window.sessionStorage.setItem("businesshours",JSON.stringify(t)))}))},initWS:function(){var e=this;this.wsInfoLoading=!0;var t="/attendance/workingschedule/schedule/?page="+this.page+"&size="+this.size+"&monthday="+this.firstOfMonth+","+this.endOfMonth+"&numofday="+this.moment(this.firstOfWeek).daysInMonth();this.searchValue.empname&&(t+="&empname="+this.searchValue.empname),this.searchValue.depid&&(t+="&depid="+this.searchValue.depid),this.getRequest(t).then((function(t){e.wsInfoLoading=!1,t&&(e.wss=t.data,e.total=t.total,0===t.data.length&&e.$notify.error({title:"错误",message:"本页员工排班没有数据，请翻页或添加数据！"}))}))},lastweek:function(){this.firstOfMonth=this.moment(this.firstOfMonth).subtract(1,"days").startOf("month").format("YYYY-MM-DD"),this.endOfMonth=this.moment(this.firstOfMonth).endOf("month").format("YYYY-MM-DD"),this.initWS()},nextweek:function(){this.firstOfMonth=this.moment(this.endOfMonth).add(1,"days").startOf("month").format("YYYY-MM-DD"),this.endOfMonth=this.moment(this.endOfMonth).add(1,"days").endOf("month").format("YYYY-MM-DD"),this.initWS()},changeAllTime:function(){this.firstOfMonth=this.moment(this.firstOfMonth).startOf("month").format("YYYY-MM-DD"),this.endOfMonth=this.moment(this.firstOfMonth).endOf("month").format("YYYY-MM-DD"),this.initWS()},autoDo:function(){var e=this;this.getRequest("/attendance/workingschedule/schedule/autodo/?monthday="+this.firstOfMonth+","+this.endOfMonth).then((function(t){t&&e.initWS()}))},searvhViewHandleNodeClick:function(e){this.inputDepName=e.depname,this.searchValue.depid=e.depid,this.searchDepView=!this.searchDepView},showSearchDepView:function(){this.searchDepView=!this.searchDepView},sizeChange:function(e){this.size=e,this.initWS()},currentChange:function(e){this.page=e,this.initWS()},submitSchedule:function(e){var t=this;this.$confirm("此操作将提交【"+e.empname+"】的排班计划, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.putRequest("/attendance/workingschedule/schedule/",e).then((function(e){e&&t.initWS()}))})).catch((function(){t.$message({type:"info",message:"已取消提交"})}))},batchDeleteSche:function(){var e=this;this.$confirm("此操作将删除所选中的所有的排班计划, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.postRequest("/attendance/workingschedule/schedule/batchdelete/",e.multipleSelection).then((function(t){t&&e.initWS()}))})).catch((function(){e.$message({type:"info",message:"已取消提交"})}))},handleSelectionChange:function(e){this.multipleSelection=e},week:function(e){var t=this.moment(e).day();return 0===t?"星期日":1===t?"星期一":2===t?"星期二":3===t?"星期三":4===t?"星期四":5===t?"星期五":6===t?"星期六":void 0}}},f=m,g=(a("48ee"),Object(c["a"])(f,u,h,!1,null,"69f659f2",null)),b=g.exports,y={name:"AttWs",data:function(){return{activeName:"busihour"}},components:{BusiHour:d,EmpSche:b}},w=y,v=Object(c["a"])(w,l,i,!1,null,"171d7819",null);t["default"]=v.exports},"5dca":function(e,t,a){},"628f":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"待处理申请",name:"readydoapp"}},["readydoapp"===e.activeName?a("ReadyDoApp"):e._e()],1),a("el-tab-pane",{attrs:{label:"历史记录",name:"finishedapp"}},["finishedapp"===e.activeName?a("FinishedApp"):e._e()],1)],1)],1)},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.appattLoading,expression:"appattLoading"}],ref:"multipleTable",attrs:{stripe:"",border:"","max-height":"513",data:e.appatts,"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{"header-align":"center",fixed:"",prop:"aatid",label:"编号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"employee.empname",fixed:"",align:"left",label:"姓名",width:"90"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"workid",label:"工号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.depname",width:"100",align:"left",label:"所属部门"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.leadername",width:"100",align:"left",label:"领导姓名"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"category",width:"100",align:"left",label:"申请类型"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",prop:"reason",width:"300",align:"left",label:"申请原因"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appbegindate",width:"140",align:"left",label:"开始时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appenddate",width:"140",align:"left",label:"结束时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"total",width:"100",align:"left",label:"时间总计"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appdate",width:"140",align:"left",label:"申请时间"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"申请状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(e.isSubmit(t.row.issubmit)))])]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"领导意见"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.isApprove(t.row.isapprove)))])]}}])}),a("el-table-column",{attrs:{align:"center",fixed:"right",width:"80px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#15aabf"},attrs:{type:"text"},on:{click:function(a){return e.checkAppatt(t.row)}}},[a("i",{staticClass:"fas fa-eye fa-lg"})])]}}])})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("el-dialog",{attrs:{title:"查看申请",visible:e.editAppattDialog,width:"40%"},on:{"update:visible":function(t){e.editAppattDialog=t}}},[a("div",[a("el-form",{ref:"appattForm",attrs:{model:e.appatt,"status-icon":"",rules:e.rules,disabled:""}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工工号:",prop:"workid"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入工号"},model:{value:e.appatt.workid,callback:function(t){e.$set(e.appatt,"workid",t)},expression:"appatt.workid"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请类别:",prop:"category"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择申请类别",size:"mini"},model:{value:e.appatt.category,callback:function(t){e.$set(e.appatt,"category",t)},expression:"appatt.category"}},e._l(e.category,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"申请理由:",prop:"reason"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"textarea",autosize:{minRows:2,maxRows:7},placeholder:"请输入内容",minlength:"10",maxlength:"255","show-word-limit":""},model:{value:e.appatt.reason,callback:function(t){e.$set(e.appatt,"reason",t)},expression:"appatt.reason"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开始时间:",prop:"appbegindate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间","default-time":"09:00:00"},model:{value:e.appatt.appbegindate,callback:function(t){e.$set(e.appatt,"appbegindate",t)},expression:"appatt.appbegindate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"结束时间:",prop:"appenddate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择结束时间","default-time":"09:00:00"},model:{value:e.appatt.appenddate,callback:function(t){e.$set(e.appatt,"appenddate",t)},expression:"appatt.appenddate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间总计:",prop:"total"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入总计"},model:{value:e.appatt.total,callback:function(t){e.$set(e.appatt,"total",e._n(t))},expression:"appatt.total"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请时间:",prop:"appdate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择申请时间","default-time":"09:00:00"},model:{value:e.appatt.appdate,callback:function(t){e.$set(e.appatt,"appdate",t)},expression:"appatt.appdate"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editAppattDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"warning"},on:{click:e.refuse}},[e._v("拒 绝")]),a("el-button",{attrs:{type:"primary"},on:{click:e.agree}},[e._v("同 意")])],1)])],1)},s=[],r={name:"ReadyDoApp",data:function(){return{page:1,size:10,total:0,appatts:[],appattLoading:!1,editAppattDialog:!1,multipleSelection:[],category:["请假","调休","出差","加班"],appatt:{workid:1,category:"请假",reason:"生病",appbegindate:"2019-08-05 09:00:00",appenddate:"2019-08-05 18:00:00",total:8,appdate:"2019-08-05 07:00:00",issubmit:!1},rules:{workid:[{required:!0,message:"请输入工号",trigger:"blur"}],category:[{required:!0,message:"请选择申请类别",trigger:"change"}],reason:[{required:!0,message:"请输入申请原因",trigger:"blur"}],appbegindate:[{required:!0,message:"请选择申请开始时间",trigger:"blur"}],appenddate:[{required:!0,message:"请选择申请结束时间",trigger:"blur"}],total:[{required:!0,message:"请输入总计时间",trigger:"blur"},{type:"number",message:"总计时间必须为数字值",trigger:"blur"}],appdate:[{required:!0,message:"请选择申请时间",trigger:"blur"}]}}},mounted:function(){this.initAppatts()},methods:{initAppatts:function(){var e=this;this.appattLoading=!0,this.getRequest("/attendance/transactionmanagement/readydoapp/?page="+this.page+"&size="+this.size).then((function(t){e.appattLoading=!1,t&&(e.appatts=t.data,e.total=t.total,0===t.data.length&&e.$notify.error({title:"错误",message:"待处理申请中没有数据，请翻页或添加数据！"}))}))},refuse:function(){var e=this;this.appatt.isapprove=!1,this.putRequest("/attendance/transactionmanagement/",this.appatt).then((function(t){t&&(e.editAppattDialog=!1,e.initAppatts())}))},agree:function(){var e=this;this.appatt.isapprove=!0,this.putRequest("/attendance/transactionmanagement/",this.appatt).then((function(t){t&&(e.editAppattDialog=!1,e.initAppatts())}))},sizeChange:function(e){this.size=e,this.initAppatts()},currentChange:function(e){this.page=e,this.initAppatts()},checkAppatt:function(e){this.appatt=Object.assign({},e),this.editAppattDialog=!0},handleSelectionChange:function(e){this.multipleSelection=e},isSubmit:function(e){return!1===e?"未提交":"已提交"},isApprove:function(e){return!0===e?"同意":!1===e?"拒绝":"未决定"}}},o=r,c=a("2877"),p=Object(c["a"])(o,n,s,!1,null,"db8fc330",null),d=p.exports,u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.appattLoading,expression:"appattLoading"}],ref:"multipleTable",attrs:{stripe:"",border:"","max-height":"513",data:e.appatts,"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{"header-align":"center",fixed:"",prop:"aatid",label:"编号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"employee.empname",fixed:"",align:"left",label:"姓名",width:"90"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"workid",label:"工号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.depname",width:"100",align:"left",label:"所属部门"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.leadername",width:"100",align:"left",label:"领导姓名"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"category",width:"100",align:"left",label:"申请类型"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",prop:"reason",width:"300",align:"left",label:"申请原因"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appbegindate",width:"140",align:"left",label:"开始时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appenddate",width:"140",align:"left",label:"结束时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"total",width:"100",align:"left",label:"时间总计"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appdate",width:"140",align:"left",label:"申请时间"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"申请状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(e.isSubmit(t.row.issubmit)))])]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"领导意见"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.isApprove(t.row.isapprove)))])]}}])}),a("el-table-column",{attrs:{align:"center",fixed:"right",width:"80px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#15aabf"},attrs:{type:"text"},on:{click:function(a){return e.checkAppatt(t.row)}}},[a("i",{staticClass:"fas fa-eye fa-lg"})])]}}])})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("el-dialog",{attrs:{title:"查看申请",visible:e.editAppattDialog,width:"40%"},on:{"update:visible":function(t){e.editAppattDialog=t}}},[a("div",[a("el-form",{ref:"appattForm",attrs:{model:e.appatt,"status-icon":"",rules:e.rules,disabled:""}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工工号:",prop:"workid"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入工号"},model:{value:e.appatt.workid,callback:function(t){e.$set(e.appatt,"workid",t)},expression:"appatt.workid"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请类别:",prop:"category"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择申请类别",size:"mini"},model:{value:e.appatt.category,callback:function(t){e.$set(e.appatt,"category",t)},expression:"appatt.category"}},e._l(e.category,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"申请理由:",prop:"reason"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"textarea",autosize:{minRows:2,maxRows:7},placeholder:"请输入内容",minlength:"10",maxlength:"255","show-word-limit":""},model:{value:e.appatt.reason,callback:function(t){e.$set(e.appatt,"reason",t)},expression:"appatt.reason"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开始时间:",prop:"appbegindate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间","default-time":"09:00:00"},model:{value:e.appatt.appbegindate,callback:function(t){e.$set(e.appatt,"appbegindate",t)},expression:"appatt.appbegindate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"结束时间:",prop:"appenddate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择结束时间","default-time":"09:00:00"},model:{value:e.appatt.appenddate,callback:function(t){e.$set(e.appatt,"appenddate",t)},expression:"appatt.appenddate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间总计:",prop:"total"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入总计"},model:{value:e.appatt.total,callback:function(t){e.$set(e.appatt,"total",e._n(t))},expression:"appatt.total"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请时间:",prop:"appdate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择申请时间","default-time":"09:00:00"},model:{value:e.appatt.appdate,callback:function(t){e.$set(e.appatt,"appdate",t)},expression:"appatt.appdate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"领导意见:",prop:"isapprove"}},[a("el-switch",{attrs:{"active-text":"同意","active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":"拒绝"},model:{value:e.appatt.isapprove,callback:function(t){e.$set(e.appatt,"isapprove",t)},expression:"appatt.isapprove"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editAppattDialog=!1}}},[e._v("确 定")])],1)])],1)},h=[],m={name:"FinishedApp",data:function(){return{page:1,size:10,total:0,appatts:[],appattLoading:!1,editAppattDialog:!1,multipleSelection:[],category:["请假","调休","出差","加班"],appatt:{workid:1,category:"请假",reason:"生病",appbegindate:"2019-08-05 09:00:00",appenddate:"2019-08-05 18:00:00",total:8,appdate:"2019-08-05 07:00:00",issubmit:!1},rules:{workid:[{required:!0,message:"请输入工号",trigger:"blur"}],category:[{required:!0,message:"请选择申请类别",trigger:"change"}],reason:[{required:!0,message:"请输入申请原因",trigger:"blur"}],appbegindate:[{required:!0,message:"请选择申请开始时间",trigger:"blur"}],appenddate:[{required:!0,message:"请选择申请结束时间",trigger:"blur"}],isapprove:[{required:!0,message:"请选择领导意见",trigger:"blur"}],total:[{required:!0,message:"请输入总计时间",trigger:"blur"},{type:"number",message:"总计时间必须为数字值",trigger:"blur"}],appdate:[{required:!0,message:"请选择申请时间",trigger:"blur"}]}}},mounted:function(){this.initAppatts()},methods:{initAppatts:function(){var e=this;this.appattLoading=!0,this.getRequest("/attendance/transactionmanagement/finishedapp/?page="+this.page+"&size="+this.size).then((function(t){e.appattLoading=!1,t&&(e.appatts=t.data,e.total=t.total,0===t.data.length&&e.$notify.error({title:"错误",message:"历史记录中没有数据，请翻页或添加数据！"}))}))},sizeChange:function(e){this.size=e,this.initAppatts()},currentChange:function(e){this.page=e,this.initAppatts()},checkAppatt:function(e){this.appatt=Object.assign({},e),this.editAppattDialog=!0},handleSelectionChange:function(e){this.multipleSelection=e},isSubmit:function(e){return!1===e?"未提交":"已提交"},isApprove:function(e){return!0===e?"同意":!1===e?"拒绝":"未决定"}}},f=m,g=Object(c["a"])(f,u,h,!1,null,"0e1156a6",null),b=g.exports,y={name:"AttTramanagement",data:function(){return{activeName:"readydoapp"}},components:{ReadyDoApp:d,FinishedApp:b}},w=y,v=Object(c["a"])(w,l,i,!1,null,"148ff23a",null);t["default"]=v.exports},"7f41":function(e,t,a){"use strict";var l=a("5dca"),i=a.n(l);i.a},8583:function(e,t,a){"use strict";var l=a("f557"),i=a.n(l);i.a},"85b7":function(e,t,a){},c5cd:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("div",[a("div",{staticClass:"top-menu"},[a("div",[e._v(" 所属部门: "),a("el-popover",{attrs:{placement:"right",title:"请选择部门",width:"200",trigger:"manual"},model:{value:e.searchDepView,callback:function(t){e.searchDepView=t},expression:"searchDepView"}},[a("el-tree",{attrs:{"default-expand-all":"",data:e.allDeps,props:e.defaultProps},on:{"node-click":e.searvhViewHandleNodeClick}}),a("div",{staticClass:"select-dep",attrs:{slot:"reference"},on:{click:e.showSearchDepView},slot:"reference"},[e._v(e._s(e.inputDepName)+" ")])],1),e._v(" 申请日期: "),a("el-date-picker",{staticStyle:{width:"340px"},attrs:{type:"datetimerange","unlink-panels":"",align:"right","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","range-separator":"至","end-placeholder":"结束日期","default-time":["09:00:00","18:00:00"]},model:{value:e.searchValue.appdate,callback:function(t){e.$set(e.searchValue,"appdate",t)},expression:"searchValue.appdate"}}),a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入员工名进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.initAppatts},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initAppatts(t)}},model:{value:e.searchValue.empname,callback:function(t){e.$set(e.searchValue,"empname",t)},expression:"searchValue.empname"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.initAppatts}},[e._v(" 搜索 ")])],1),a("div",[a("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v(" 导出数据 ")])],1)])]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.appattLoading,expression:"appattLoading"}],ref:"multipleTable",attrs:{stripe:"",border:"","max-height":"513",data:e.appatts,"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{"header-align":"center",fixed:"",prop:"aatid",label:"编号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"employee.empname",fixed:"",align:"left",label:"姓名",width:"90"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"workid",label:"工号",align:"left",width:"85"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.depname",width:"100",align:"left",label:"所属部门"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"department.leadername",width:"100",align:"left",label:"领导姓名"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"category",width:"100",align:"left",label:"申请类型"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",prop:"reason",width:"300",align:"left",label:"申请原因"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appbegindate",width:"140",align:"left",label:"开始时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appenddate",width:"140",align:"left",label:"结束时间"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"total",width:"100",align:"left",label:"时间总计"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"appdate",width:"140",align:"left",label:"申请时间"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"申请状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(e.isSubmit(t.row.issubmit)))])]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"领导意见"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.isApprove(t.row.isapprove)))])]}}])}),a("el-table-column",{attrs:{align:"center",fixed:"right",width:"80px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#15aabf"},attrs:{type:"text"},on:{click:function(a){return e.checkAppatt(t.row)}}},[a("i",{staticClass:"fas fa-eye fa-lg"})])]}}])})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("el-dialog",{attrs:{title:"查看申请",visible:e.editAppattDialog,width:"40%"},on:{"update:visible":function(t){e.editAppattDialog=t}}},[a("div",[a("el-form",{ref:"appattForm",attrs:{model:e.appatt,"status-icon":"",rules:e.rules,disabled:""}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工工号:",prop:"workid"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入工号"},model:{value:e.appatt.workid,callback:function(t){e.$set(e.appatt,"workid",t)},expression:"appatt.workid"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请类别:",prop:"category"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择申请类别",size:"mini"},model:{value:e.appatt.category,callback:function(t){e.$set(e.appatt,"category",t)},expression:"appatt.category"}},e._l(e.category,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"申请理由:",prop:"reason"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"textarea",autosize:{minRows:2,maxRows:7},placeholder:"请输入内容",minlength:"10",maxlength:"255","show-word-limit":""},model:{value:e.appatt.reason,callback:function(t){e.$set(e.appatt,"reason",t)},expression:"appatt.reason"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开始时间:",prop:"appbegindate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间","default-time":"09:00:00"},model:{value:e.appatt.appbegindate,callback:function(t){e.$set(e.appatt,"appbegindate",t)},expression:"appatt.appbegindate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"结束时间:",prop:"appenddate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择结束时间","default-time":"09:00:00"},model:{value:e.appatt.appenddate,callback:function(t){e.$set(e.appatt,"appenddate",t)},expression:"appatt.appenddate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间总计:",prop:"total"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入总计"},model:{value:e.appatt.total,callback:function(t){e.$set(e.appatt,"total",e._n(t))},expression:"appatt.total"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请时间:",prop:"appdate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择申请时间","default-time":"09:00:00"},model:{value:e.appatt.appdate,callback:function(t){e.$set(e.appatt,"appdate",t)},expression:"appatt.appdate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"领导意见:",prop:"isapprove"}},[a("el-switch",{attrs:{"active-text":"同意","active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":"拒绝"},model:{value:e.appatt.isapprove,callback:function(t){e.$set(e.appatt,"isapprove",t)},expression:"appatt.isapprove"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editAppattDialog=!1}}},[e._v("确 定")])],1)])],1)},i=[],n={name:"AttTransactioninfo",data:function(){return{searchValue:{empname:null,depid:null,appdate:null},page:1,size:10,total:0,appatts:[],searchDepView:!1,appattLoading:!1,editAppattDialog:!1,inputDepName:"所属部门",allDeps:[],multipleSelection:[],category:["请假","调休","出差","加班"],defaultProps:{children:"children",label:"depname"},appatt:{workid:1,category:"请假",reason:"生病",appbegindate:"2019-08-05 09:00:00",appenddate:"2019-08-05 18:00:00",total:8,appdate:"2019-08-05 07:00:00",issubmit:!1},rules:{workid:[{required:!0,message:"请输入工号",trigger:"blur"}],category:[{required:!0,message:"请选择申请类别",trigger:"change"}],reason:[{required:!0,message:"请输入申请原因",trigger:"blur"}],appbegindate:[{required:!0,message:"请选择申请开始时间",trigger:"blur"}],appenddate:[{required:!0,message:"请选择申请结束时间",trigger:"blur"}],isapprove:[{required:!0,message:"请选择领导意见",trigger:"blur"}],total:[{required:!0,message:"请输入总计时间",trigger:"blur"},{type:"number",message:"总计时间必须为数字值",trigger:"blur"}],appdate:[{required:!0,message:"请选择申请时间",trigger:"blur"}]}}},mounted:function(){this.initAppatts(),this.initData()},methods:{initAppatts:function(){var e=this;this.appattLoading=!0;var t="/attendance/transactioninfo/?page="+this.page+"&size="+this.size;this.searchValue.empname&&(t+="&empname="+this.searchValue.empname),this.searchValue.depid&&(t+="&depid="+this.searchValue.depid),this.searchValue.appdate&&(t+="&appdate="+this.searchValue.appdate),this.getRequest(t).then((function(t){e.appattLoading=!1,t&&(e.appatts=t.data,e.total=t.total,0===t.data.length&&e.$notify.error({title:"错误",message:"历史记录中没有数据，请翻页或添加数据！"}))}))},initData:function(){var e=this;window.sessionStorage.getItem("deps")?this.allDeps=JSON.parse(window.sessionStorage.getItem("deps")):this.getRequest("/employee/basic/info/deps").then((function(t){t&&(e.allDeps=t,window.sessionStorage.setItem("deps",JSON.stringify(t)))}))},sizeChange:function(e){this.size=e,this.initAppatts()},currentChange:function(e){this.page=e,this.initAppatts()},checkAppatt:function(e){this.appatt=Object.assign({},e),this.editAppattDialog=!0},handleSelectionChange:function(e){this.multipleSelection=e},isSubmit:function(e){return!1===e?"未提交":"已提交"},isApprove:function(e){return!0===e?"同意":!1===e?"拒绝":"未决定"},searvhViewHandleNodeClick:function(e){this.inputDepName=e.depname,this.searchValue.depid=e.depid,this.searchDepView=!this.searchDepView},showSearchDepView:function(){this.searchDepView=!this.searchDepView}}},s=n,r=(a("7f41"),a("2877")),o=Object(r["a"])(s,l,i,!1,null,"ad81de34",null);t["default"]=o.exports},ceaf:function(e,t,a){"use strict";var l=a("85b7"),i=a.n(l);i.a},f557:function(e,t,a){}}]);
//# sourceMappingURL=chunk-d203d38c.d6a3d897.js.map