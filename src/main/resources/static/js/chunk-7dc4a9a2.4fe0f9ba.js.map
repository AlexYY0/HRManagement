{"version":3,"sources":["webpack:///./src/views/org sync ^\\.\\/.*\\.vue$","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./src/views/org/OrgManage.vue?297f","webpack:///src/views/org/OrgManage.vue","webpack:///./src/views/org/OrgManage.vue?6793","webpack:///./src/views/org/OrgManage.vue?3a40","webpack:///./src/views/org/OrgManage.vue?6ea0"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","$","$filter","filter","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticStyle","attrs","model","value","callback","$$v","filterText","expression","staticClass","ref","deps","defaultProps","filterNode","scopedSlots","_u","key","fn","node","data","_v","_s","depname","leadername","on","showUpdateDepView","showAddDepView","deleteDep","updateDialogVisible","$event","dep","$set","_l","item","workid","label","slot","doUpdateDep","addDialogVisible","pname","doAddDep","staticRenderFns","component"],"mappings":"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","file":"js/chunk-7dc4a9a2.4fe0f9ba.js","sourcesContent":["var map = {\n\t\"./OrgManage.vue\": \"bf1f\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"267c\";","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n// Edge 14- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"500px\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入部门名称进行搜索...\",\"prefix-icon\":\"el-icon-search\"},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}}),_c('div',{staticClass:\"organization-tree\"},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.deps,\"props\":_vm.defaultProps,\"expand-on-click-node\":false,\"filter-node-method\":_vm.filterNode},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\",staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\",\"width\":\"100%\"}},[_c('span',[_vm._v(_vm._s(data.depname)+\"(领导: \"+_vm._s(data.leadername)+\")\")]),_c('span',[_c('el-button',{staticClass:\"depBtn\",attrs:{\"type\":\"info\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.showUpdateDepView(data); }}},[_vm._v(\" 修改 \")]),_c('el-button',{staticClass:\"depBtn\",attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.showAddDepView(data); }}},[_vm._v(\" 添加 \")]),_c('el-button',{staticClass:\"depBtn\",attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.deleteDep(data); }}},[_vm._v(\" 删除 \")])],1)])}}])}),_c('el-dialog',{attrs:{\"title\":\"修改部门\",\"visible\":_vm.updateDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.updateDialogVisible=$event}}},[_c('div',[_c('table',[_c('tr',[_c('td',[_c('el-tag',[_vm._v(\"部门名称\")])],1),_c('td',[_c('el-input',{attrs:{\"placeholder\":\"请输入部门名称...\"},model:{value:(_vm.dep.depname),callback:function ($$v) {_vm.$set(_vm.dep, \"depname\", $$v)},expression:\"dep.depname\"}})],1)]),_c('tr',[_c('td',[_c('el-tag',[_vm._v(\"领导工号\")])],1),_c('td',[_c('el-select',{staticClass:\"findAllEmp-autocomplete\",attrs:{\"popper-append-to-body\":false,\"clearable\":\"\",\"filterable\":\"\",\"placeholder\":\"请选择领导姓名\"},model:{value:(_vm.dep.leaderid),callback:function ($$v) {_vm.$set(_vm.dep, \"leaderid\", $$v)},expression:\"dep.leaderid\"}},_vm._l((_vm.employees),function(item){return _c('el-option',{key:item.workid,attrs:{\"label\":item.label,\"value\":item.workid}},[_c('div',{staticClass:\"empname\"},[_vm._v(_vm._s(item.label))]),_c('span',{staticClass:\"workid\"},[_vm._v(\"工号: \"+_vm._s(item.workid))])])}),1)],1)])])]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.updateDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.doUpdateDep}},[_vm._v(\"确 定\")])],1)]),_c('el-dialog',{attrs:{\"title\":\"添加部门\",\"visible\":_vm.addDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event}}},[_c('div',[_c('table',[_c('tr',[_c('td',[_c('el-tag',[_vm._v(\"上级部门\")])],1),_c('td',[_vm._v(_vm._s(_vm.pname))])]),_c('tr',[_c('td',[_c('el-tag',[_vm._v(\"部门名称\")])],1),_c('td',[_c('el-input',{attrs:{\"placeholder\":\"请输入部门名称...\"},model:{value:(_vm.dep.depname),callback:function ($$v) {_vm.$set(_vm.dep, \"depname\", $$v)},expression:\"dep.depname\"}})],1)]),_c('tr',[_c('td',[_c('el-tag',[_vm._v(\"领导姓名\")])],1),_c('td',[_c('el-select',{staticClass:\"findAllEmp-autocomplete\",attrs:{\"popper-append-to-body\":false,\"clearable\":\"\",\"filterable\":\"\",\"placeholder\":\"请选择领导姓名\"},model:{value:(_vm.dep.leaderid),callback:function ($$v) {_vm.$set(_vm.dep, \"leaderid\", $$v)},expression:\"dep.leaderid\"}},_vm._l((_vm.employees),function(item){return _c('el-option',{key:item.workid,attrs:{\"label\":item.label,\"value\":item.workid}},[_c('div',{staticClass:\"empname\"},[_vm._v(_vm._s(item.label))]),_c('span',{staticClass:\"workid\"},[_vm._v(\"工号: \"+_vm._s(item.workid))])])}),1)],1)])])]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.doAddDep}},[_vm._v(\"确 定\")])],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div style=\"width: 500px;\">\r\n        <el-input\r\n                placeholder=\"请输入部门名称进行搜索...\"\r\n                prefix-icon=\"el-icon-search\"\r\n                v-model=\"filterText\">\r\n        </el-input>\r\n        <div class=\"organization-tree\">\r\n            <el-tree\r\n                    :data=\"deps\"\r\n                    :props=\"defaultProps\"\r\n                    :expand-on-click-node=\"false\"\r\n                    :filter-node-method=\"filterNode\"\r\n                    ref=\"tree\">\r\n                <span class=\"custom-tree-node\" style=\"display: flex;justify-content: space-between;width: 100%;\"\r\n                      slot-scope=\"{ node, data }\">\r\n                    <span>{{data.depname }}(领导: {{data.leadername}})</span>\r\n                    <span>\r\n                        <el-button\r\n                                type=\"info\"\r\n                                size=\"mini\"\r\n                                class=\"depBtn\"\r\n                                @click=\"() => showUpdateDepView(data)\">\r\n                        修改\r\n                        </el-button>\r\n                        <el-button\r\n                              type=\"primary\"\r\n                              size=\"mini\"\r\n                              class=\"depBtn\"\r\n                              @click=\"() => showAddDepView(data)\">\r\n                        添加\r\n                        </el-button>\r\n\r\n                        <el-button\r\n                              type=\"danger\"\r\n                              size=\"mini\"\r\n                              class=\"depBtn\"\r\n                              @click=\"() => deleteDep(data)\">\r\n                            删除\r\n                        </el-button>\r\n                    </span>\r\n                </span>\r\n            </el-tree>\r\n            <el-dialog\r\n                    title=\"修改部门\"\r\n                    :visible.sync=\"updateDialogVisible\"\r\n                    width=\"30%\">\r\n                <div>\r\n                    <table>\r\n                        <tr>\r\n                            <td>\r\n                                <el-tag>部门名称</el-tag>\r\n                            </td>\r\n                            <td>\r\n                                <el-input v-model=\"dep.depname\" placeholder=\"请输入部门名称...\"></el-input>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <el-tag>领导工号</el-tag>\r\n                            </td>\r\n                            <td>\r\n                                <el-select\r\n                                        :popper-append-to-body=\"false\" class=\"findAllEmp-autocomplete\"\r\n                                        clearable v-model=\"dep.leaderid\" filterable placeholder=\"请选择领导姓名\">\r\n                                    <el-option\r\n                                            v-for=\"item in employees\"\r\n                                            :key=\"item.workid\"\r\n                                            :label=\"item.label\"\r\n                                            :value=\"item.workid\">\r\n                                        <div class=\"empname\">{{ item.label }}</div>\r\n                                        <span class=\"workid\">工号: {{ item.workid }}</span>\r\n                                    </el-option>\r\n                                </el-select>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"updateDialogVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"doUpdateDep\">确 定</el-button>\r\n                </span>\r\n            </el-dialog>\r\n            <el-dialog\r\n                    title=\"添加部门\"\r\n                    :visible.sync=\"addDialogVisible\"\r\n                    width=\"30%\">\r\n                <div>\r\n                    <table>\r\n                        <tr>\r\n                            <td>\r\n                                <el-tag>上级部门</el-tag>\r\n                            </td>\r\n                            <td>{{pname}}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <el-tag>部门名称</el-tag>\r\n                            </td>\r\n                            <td>\r\n                                <el-input v-model=\"dep.depname\" placeholder=\"请输入部门名称...\"></el-input>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <el-tag>领导姓名</el-tag>\r\n                            </td>\r\n                            <td>\r\n                                <el-select\r\n                                        :popper-append-to-body=\"false\" class=\"findAllEmp-autocomplete\"\r\n                                        clearable v-model=\"dep.leaderid\" filterable placeholder=\"请选择领导姓名\">\r\n                                    <el-option\r\n                                            v-for=\"item in employees\"\r\n                                            :key=\"item.workid\"\r\n                                            :label=\"item.label\"\r\n                                            :value=\"item.workid\">\r\n                                        <div class=\"empname\">{{ item.label }}</div>\r\n                                        <span class=\"workid\">工号: {{ item.workid }}</span>\r\n                                    </el-option>\r\n                                </el-select>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"doAddDep\">确 定</el-button>\r\n                </span>\r\n            </el-dialog>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"OrgManage\",\r\n        data() {\r\n            return {\r\n                addDialogVisible: false,\r\n                updateDialogVisible:false,\r\n                filterText: '',\r\n                dep: {\r\n                    depname: '',\r\n                    parentid: -1\r\n                },\r\n                pname: '',\r\n                deps: [],\r\n                defaultProps: {\r\n                    children: 'children',\r\n                    label: 'depname'\r\n                },\r\n                employees: [],\r\n                state: ''\r\n            }\r\n        },\r\n        watch: {\r\n            filterText(val) {\r\n                this.$refs.tree.filter(val);\r\n            }\r\n        },\r\n        mounted() {\r\n            this.initDeps();\r\n        },\r\n        methods: {\r\n            initDep() {\r\n                this.dep = {\r\n                    depname: '',\r\n                    parentid: -1\r\n                };\r\n                this.pname = '';\r\n            },\r\n            updateDep2Deps(deps, dep){\r\n                for (let i = 0; i < deps.length; i++) {\r\n                    let d = deps[i];\r\n                    if (d.depid == dep.depid) {\r\n                        d.leadername=dep.leadername;\r\n                        return;\r\n                    } else {\r\n                        this.updateDep2Deps(d.children, dep);\r\n                    }\r\n                }\r\n            },\r\n            doUpdateDep(){\r\n                this.putRequest(\"/organization/management/update/\", this.dep).then(resp => {\r\n                    if (resp) {\r\n                        this.updateDep2Deps(this.deps, resp.obj);\r\n                        this.updateDialogVisible = false;\r\n                        //初始化变量\r\n                        this.initDep();\r\n                    }\r\n                })\r\n            },\r\n            addDep2Deps(deps, dep) {\r\n                for (let i = 0; i < deps.length; i++) {\r\n                    let d = deps[i];\r\n                    if (d.depid == dep.parentid) {\r\n                        d.children = d.children.concat(dep);\r\n                        if (d.children.length > 0) {\r\n                            d.parent = true;\r\n                        }\r\n                        return;\r\n                    } else {\r\n                        this.addDep2Deps(d.children, dep);\r\n                    }\r\n                }\r\n            },\r\n            doAddDep() {\r\n                this.postRequest(\"/organization/management/\", this.dep).then(resp => {\r\n                    if (resp) {\r\n                        this.addDep2Deps(this.deps, resp.obj);\r\n                        this.addDialogVisible = false;\r\n                        //初始化变量\r\n                        this.initDep();\r\n                    }\r\n                })\r\n            },\r\n            removeDepFromDeps(p,deps, depid) {\r\n                for(let i=0;i<deps.length;i++){\r\n                    let d = deps[i];\r\n                    if (d.depid == depid) {\r\n                        deps.splice(i, 1);\r\n                        if (deps.length == 0) {\r\n                            p.parent = false;\r\n                        }\r\n                        return;\r\n                    }else{\r\n                        this.removeDepFromDeps(d,d.children, depid);\r\n                    }\r\n                }\r\n            },\r\n            deleteDep(data) {\r\n                if (data.parent) {\r\n                    this.$message.error(\"父部门删除失败\");\r\n                } else {\r\n                    this.$confirm('此操作将永久删除【' + data.depname + '】部门, 是否继续?', '提示', {\r\n                        confirmButtonText: '确定',\r\n                        cancelButtonText: '取消',\r\n                        type: 'warning'\r\n                    }).then(() => {\r\n                        this.deleteRequest(\"/organization/management/\"+data.depid).then(resp=>{\r\n                            if (resp) {\r\n                                this.removeDepFromDeps(null,this.deps,data.depid);\r\n                            }\r\n                        })\r\n                    }).catch(() => {\r\n                        this.$message({\r\n                            type: 'info',\r\n                            message: '已取消删除'\r\n                        });\r\n                    });\r\n                }\r\n            },\r\n            showUpdateDepView(data){\r\n                this.dep.depid=data.depid;\r\n                this.dep.depname=data.depname;\r\n                this.dep.parentid=data.parentid;\r\n                this.updateDialogVisible = true;\r\n            },\r\n            showAddDepView(data) {\r\n                this.pname = data.depname;\r\n                this.dep.parentid = data.depid;\r\n                this.addDialogVisible = true;\r\n            },\r\n            initDeps() {\r\n                this.getRequest(\"/organization/management/\").then(resp => {\r\n                    if (resp) {\r\n                        this.deps = resp;\r\n                    }\r\n                });\r\n                this.getRequest(\"/organization/management/employee/\").then(resp => {\r\n                    if (resp) {\r\n                        this.employees = resp;\r\n                    }\r\n                })\r\n            },\r\n            filterNode(value, data) {\r\n                if (!value) return true;\r\n                return data.depname.indexOf(value) !== -1;\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .organization-tree{\r\n        margin-top: 7px;\r\n    }\r\n    .depBtn {\r\n        padding: 2px;\r\n    }\r\n    /deep/ .findAllEmp-autocomplete li{\r\n        line-height: normal;\r\n        height: 50px;\r\n        padding: 7px;\r\n    }\r\n    /deep/ .findAllEmp-autocomplete li .empname {\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n    }\r\n    /deep/ .findAllEmp-autocomplete li .workid {\r\n        font-size: 12px;\r\n        color: #b4b4b4;\r\n    }\r\n    /deep/ .findAllEmp-autocomplete li.highlighted .workid{\r\n        color: #ddd;\r\n    }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrgManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrgManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrgManage.vue?vue&type=template&id=6df43939&scoped=true&\"\nimport script from \"./OrgManage.vue?vue&type=script&lang=js&\"\nexport * from \"./OrgManage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrgManage.vue?vue&type=style&index=0&id=6df43939&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6df43939\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrgManage.vue?vue&type=style&index=0&id=6df43939&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrgManage.vue?vue&type=style&index=0&id=6df43939&scoped=true&lang=css&\""],"sourceRoot":""}